import{u as C,r as l,a as k,g as S,U as B,i as E,A as D,p as F,q as u,ah as R,ai as m,j as a,R as K,C as P,b as c,c as r,n as T,o as U,s as I,L as h,N as M,I as f,B as V,O as q,Q as z,t as A,aj as L,T as $,ak as G,al as H,w as O,x as p}from"./index-59030646.js";import{B as Q}from"./Breadcrumb-49172a3f.js";const x=[{link:"/",label:"Beranda"},{link:"/user-management/tabel-user",label:"User Management"},{link:"/",label:"Ubah Kata Sandi"}];function J(){document.title="User Management | AHU RI";const b=C(),[o,j]=l.useState(!1),t=new $,v=k(),{id:w}=S(),{state:s}=B();l.useEffect(()=>{b(E(x))},[]);const g=async i=>{try{t.showLoading();const n=await G({id:w});setTimeout(async()=>{var d;try{await H({token:((d=n.data)==null?void 0:d.token)||"",password:i}),O(`Kata Sandi ${(s==null?void 0:s.username)||""} Berhasil Diubah`),v("/user-management/tabel-user")}catch(y){p(y)}finally{t.close()}},2e3)}catch(n){t.close(),p(n)}},e=D({enableReinitialize:!0,initialValues:{password:"",verification:""},validationSchema:F({password:u().required("Password Wajib diisi"),verification:u().required("Kode Verifikasi Tidak Sesuai")}),onSubmit:i=>{N()?(console.log("runn"),t.customConfirmation(`Kata Sandi ${(s==null?void 0:s.username)||""} Akan Diubah`).then(n=>{n&&g(i.password)})):e.setFieldError("verification","Kode Verifikasi Tidak Sesuai")}}),N=()=>{let i=document.getElementById("verification").value;return R(i)===!0?!0:(e.setFieldValue("verification",""),m(6,"#D3D3D3","#000000","numbers"),!1)};return l.useEffect(()=>{m(6,"#D3D3D3","#000000","numbers")},[]),a.jsx(K.Fragment,{children:a.jsxs("div",{className:"page-content",children:[a.jsx("div",{className:"mb-3",children:a.jsx("h1",{className:"text-primary fs-4 fw-bold text-uppercase m-0",children:"USER MANAGEMENT"})}),a.jsxs(P,{fluid:!0,children:[a.jsx(Q,{content:x}),a.jsx(c,{children:a.jsx(r,{lg:"12",children:a.jsx(T,{children:a.jsxs(U,{className:"p-5",children:[a.jsxs("div",{className:"fw-semibold fs-4 mb-3",children:["Ubah Kata Sandi ",(s==null?void 0:s.username)||""]}),a.jsx("div",{className:"wizard clearfix",children:a.jsx("div",{className:"content clearfix",children:a.jsxs(I,{className:"needs-validation mt-4",children:[a.jsxs(c,{className:"mb-3 row-gap-2",children:[a.jsx(r,{md:2,children:a.jsx(h,{htmlFor:"validationCustom01",className:"col-form-label p-0",children:"Kata Sandi"})}),a.jsxs(r,{md:10,children:[a.jsxs(M,{children:[a.jsx(f,{tabIndex:2,type:o?"text":"password",name:"password",autoComplete:"off",value:e.values.password||"",placeholder:"Kata Sandi",onChange:e.handleChange,onBlur:e.handleBlur,invalid:!!(e.touched.password&&e.errors.password)}),a.jsx(V,{className:"bg-white text-black border-start-0 border-secondary border-opacity-25",onClick:()=>j(!o),children:o?a.jsx(q,{size:20}):a.jsx(z,{size:20})})]}),e.touched.password&&e.errors.password?a.jsx("span",{className:"text-danger font-size-11",children:e.errors.password}):null]})]}),a.jsxs(c,{className:"mb-3 row-gap-2",children:[a.jsx(r,{md:2,children:a.jsx(h,{htmlFor:"validationCustom01",className:"col-form-label m-0 p-0",children:"Kode Verifikasi"})}),a.jsxs(r,{md:6,lg:4,children:[a.jsx(f,{tabIndex:3,id:"verification",name:"verification",autoComplete:"off",value:e.values.verification||"",type:"text",placeholder:"Kode Verifikasi",onChange:e.handleChange,onBlur:e.handleBlur,invalid:!!(e.touched.verification&&e.errors.verification)}),e.touched.verification&&e.errors.verification?a.jsx(A,{type:"invalid",children:e.errors.verification}):null]}),a.jsx(r,{md:4,lg:2,className:"d-flex justify-content-lg-end",children:a.jsx("div",{className:"captcha-container",children:a.jsx(L,{})})})]}),a.jsx("div",{className:"actions clearfix justify-content-end d-flex",children:a.jsx("button",{type:"submit",onClick:i=>{i.preventDefault(),e.handleSubmit()},className:"btn btn-primary",children:"Simpan"})})]})})})]})})})})]})]})})}export{J as default};
