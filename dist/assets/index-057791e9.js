import{j as a,aG as h,b8 as y,r as s,C as L,b as k,c as D}from"./index-59030646.js";import{C}from"./Card-c9e385e7.js";import{C as P}from"./CardContent-22b3255a.js";import{C as _}from"./auto-f5c48c80.js";import{a as T}from"./api-c8530f95.js";import{C as I}from"./Table-f12b4746.js";const N=({title:e,value:n,color:t})=>a.jsx(C,{sx:{width:"100%",height:"100%",border:"1px solid #E7E7E7",borderRadius:"8px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.05)"},children:a.jsx(P,{children:a.jsx(h,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{borderLeft:`3px solid ${t}`},children:a.jsxs(h,{sx:{width:"100%",paddingLeft:3},children:[a.jsx(y,{variant:"subtitle2",color:"",sx:{fontSize:"16px",fontWeight:500,fontFamily:"Poppins",borderBottom:"2px solid #E7E7E7",paddingBottom:1,color:"#262626"},children:e}),a.jsx(y,{variant:"h5",sx:{fontWeight:400,color:"#262626",mt:1,fontFamily:"Poppins",fontSize:"24px"},children:n})]})})})}),R=({fragments:e})=>a.jsx(h,{sx:{display:"flex",gap:2,flexWrap:"wrap",mb:3},children:e.map((n,t)=>a.jsx(h,{sx:{width:{xs:"100%",sm:"48%",md:"48%",lg:"24%"}},children:a.jsx(N,{...n})},t))}),z=[{title:"Total Permohonan",value:"4.680",color:"#60AAFA"},{title:"Total Belum Verifikasi",value:"4.680",color:"#F2933D"},{title:"Total Disetujui",value:"4.680",color:"#51B67D"},{title:"Total Ditolak",value:"4.680",color:"#EE7D7B"}],v={labels:["Jan","Feb","Mar","Apr","May","Jun"],data:[12e3,19e3,15e3,18e3,21e3,24e3]},B={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Okt","Nov","Des"],datasets:[{label:"Disetujui",data:[50,100,150,200,150,50,100,200,100,150,300,100],borderColor:"#1F7C4D",backgroundColor:"#fff",tension:.4},{label:"Ditolak",data:[10,20,50,60,100,50,200,150,75,90,10,100,20],borderColor:"#CF3533",backgroundColor:"#FDF3F3",tension:.4}]},J=[{id:"no",label:"No"},{id:"nama_lengkap",label:"Nama Lengkap"},{id:"negara_asal",label:"Negara Asal"},{id:"tanggal_permohonan",label:"Tanggal Permohonan"}],$=({title:e,data:n,labels:t,backgroundColor:u="rgba(54, 162, 235, 0.6)",borderColor:d="rgba(54, 162, 235, 1)",borderWidth:p=1,maintainAspectRatio:o=!0,aspectRatio:i=2})=>{const g=s.useRef(null),l=s.useRef(null);return s.useEffect(()=>{if(g.current){l.current&&l.current.destroy();const r=g.current.getContext("2d");l.current=new _(r,{type:"bar",data:{labels:t,datasets:[{label:e,data:n,backgroundColor:u,borderColor:d,borderWidth:p}]},options:{responsive:!0,maintainAspectRatio:o,aspectRatio:i,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(x){return`${x.dataset.label}: ${x.raw}`}}}},scales:{y:{beginAtZero:!0,grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.05)"},ticks:{stepSize:Math.ceil(Math.max(...n)/5)}},x:{grid:{display:!1,drawBorder:!1}}}}})}return()=>{l.current&&l.current.destroy()}},[n,t,e,u,d,p,o,i]),a.jsx(C,{sx:{width:"100%",height:"100%",border:"1px solid #E7E7E7",borderRadius:"8px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.05)",p:2},children:a.jsxs(P,{children:[a.jsx(h,{sx:{borderBottom:"1px solid #E7E7E7",marginBottom:3},children:a.jsx(y,{variant:"h6",gutterBottom:!0,sx:{color:"#202020",fontFamily:"Poppins",fontSize:"16px"},children:e})}),a.jsx("div",{style:{position:"relative",height:"300px"},children:a.jsx("canvas",{ref:g})})]})})},G=({title:e,data:n,labels:t,datasets:u=null,backgroundColor:d="rgba(54, 162, 235, 0.2)",borderColor:p="rgba(54, 162, 235, 1)",borderWidth:o=2,pointBackgroundColor:i="rgba(54, 162, 235, 1)",pointRadius:g=4,pointHoverRadius:l=6,fill:r=!1,tension:x=.4,maintainAspectRatio:f=!0,aspectRatio:c=2,showLegend:b=!1,yAxisTitle:j="",xAxisTitle:w=""})=>{const E=s.useRef(null),m=s.useRef(null);return s.useEffect(()=>{if(E.current){m.current&&m.current.destroy();const A=E.current.getContext("2d"),M=u||[{label:e,data:n,backgroundColor:d,borderColor:p,borderWidth:o,pointBackgroundColor:i,pointRadius:g,pointHoverRadius:l,fill:r,tension:x}];m.current=new _(A,{type:"line",data:{labels:t,datasets:M},options:{responsive:!0,maintainAspectRatio:f,aspectRatio:c,plugins:{legend:{display:b,position:"bottom"},tooltip:{callbacks:{label:function(S){return`${S.dataset.label}: ${S.raw}`}}},title:{display:!1}},scales:{y:{beginAtZero:!1,title:{display:!!j,text:j},grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.05)"}},x:{title:{display:!!w,text:w},grid:{display:!1,drawBorder:!1}}},interaction:{intersect:!1,mode:"index"}}})}return()=>{m.current&&m.current.destroy()}},[n,t,e,d,p,o,i,g,l,r,x,f,c,b,j,w,u]),a.jsx(C,{sx:{width:"100%",height:"100%",border:"1px solid #E7E7E7",borderRadius:"8px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.05)",p:2},children:a.jsxs(P,{children:[a.jsx(h,{sx:{borderBottom:"1px solid #E7E7E7",marginBottom:3},children:a.jsx(y,{variant:"h6",gutterBottom:!0,sx:{color:"#202020",fontFamily:"Poppins",fontSize:"16px"},children:e})}),a.jsx("div",{style:{position:"relative",height:"auto",width:"100%"},children:a.jsx("canvas",{ref:E})})]})})},F={currentPage:1,totalPage:1,totalData:0},Z=(e={page:1,limit:10})=>{const[n,t]=s.useState([]),[u,d]=s.useState(!0),[p,o]=s.useState(null),[i,g]=s.useState(F);return s.useEffect(()=>{const l=new AbortController;return(async()=>{d(!0),o(null);try{const r=await T(e,{signal:l.signal});t((r==null?void 0:r.data)||[]),g((r==null?void 0:r.pagination)||F)}catch(r){r.name!=="AbortError"&&(o(r),t([]))}finally{d(!1)}})(),()=>l.abort()},[e.page,e.limit]),{data:n,loading:u,error:p,pagination:i,totalItems:i.totalData}},Q=()=>{const[e,n]=s.useState(1),[t,u]=s.useState(10),[d,p]=s.useState(""),{data:o,loading:i,error:g,pagination:l}=Z({page:e,limit:t});console.log(o);const r=(o==null?void 0:o.map((c,b)=>({no:(e-1)*t+b+1,nama_lengkap:c.nama_lengkap_pemohon,negara_asal:c.kewarganegaraan_asal_pemohon_text||"-",tanggal_permohonan:new Date(c.created_at).toLocaleDateString("id-ID")})))||[],x=c=>{n(c)},f=c=>{p(c),n(1)};return a.jsxs(L,{className:"page-content bg-white",fluid:!0,children:[a.jsx(R,{fragments:z}),a.jsxs(k,{style:{marginTop:"20px"},children:[a.jsx(D,{xs:"12",sm:"12",md:"12",lg:"6",xl:"6",children:a.jsx($,{title:"Monthly Sales",data:v.data,labels:v.labels,backgroundColor:"#93C9FD"})}),a.jsx(D,{xs:"12",sm:"12",md:"12",lg:"6",xl:"6",children:a.jsx(I,{data:r,totalItems:l.totalData,currentPage:e,itemsPerPage:t,title:"Riwayat Permohonan",columns:J,enableSearch:!0,searchKeys:["nama_lengkap","negara_asal"],enablePagination:!0,emptyMessage:"Tidak ada permohonan yang cocok dengan pencarian Anda.",onPageChange:x,onSearch:f,loading:i})})]}),a.jsx(k,{style:{marginTop:"20px"},children:a.jsx(D,{xs:12,children:a.jsx(G,{title:"Grafik Permohonan",labels:B.labels,datasets:B.datasets,showLegend:!0,yAxisTitle:"Number of Users"})})})]})};export{Q as default};
