import{r as n,a as P,j as r,C,bz as y,bU as _,cx as E}from"./index-1205c25f.js";import{a as S}from"./api-910c4123.js";import{C as w}from"./Table-92b2d494.js";const h={currentPage:1,totalPage:1,totalData:0},A=(o={page:1,limit:10})=>{const[i,t]=n.useState(null),[c,l]=n.useState(!0),[d,s]=n.useState(null),[g,p]=n.useState(h);return n.useEffect(()=>{const m=new AbortController;return(async()=>{l(!0),s(null);try{const e=await S(o,{signal:m.signal});t((e==null?void 0:e.data)||[]),p((e==null?void 0:e.pagination)||h)}catch(e){e.name!=="AbortError"&&(s(e),t([]))}finally{l(!1)}})(),()=>m.abort()},[o.page,o.limit]),{data:i,loading:c,error:d,pagination:g,totalItems:g.totalData}},v=o=>[{id:"no",label:"No"},{id:"noRekomendasi",label:"Nomor Rekomendasi"},{id:"namaLengkap",label:"Nama Lengkap"},{id:"emailPemohon",label:"Email Pemohon"},{id:"tanggalLahir",label:"Tanggal Lahir"},{id:"negaraAsal",label:"Negara Asal"},{id:"verifikasi",label:"Verifikasi",renderCell:i=>r.jsx("div",{style:{display:"flex",gap:4},children:Array.from({length:5}).map((c,l)=>{const d=l+1,s=d<=i;return r.jsx(y,{size:"small",label:d,style:{backgroundColor:s?"#2E9860":"#B0B0B0",color:"white",height:20,minWidth:20,borderRadius:"50%",padding:0}},l)})})},{id:"action",label:"Action",renderCell:(i,t)=>r.jsx("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"8px",width:"auto"},children:r.jsx(_,{text:"Lihat Detail",leftIcon:r.jsx(E,{}),bgColor:"transparent",textColor:"#1E3E8A",border:"1px solid #E7E7E7",sx:{padding:.5},onClick:()=>o("detail",t)})})}],N=()=>{const o=P(),[i,t]=n.useState(1),[c,l]=n.useState(10),[d,s]=n.useState(""),{data:g,loading:p,error:m,pagination:e}=A({page:i,limit:c}),f=(a,u)=>{a==="detail"&&o(`/pewarganegaraan/admin/verifikasi/${u.id}`)},b=a=>{t(a)},k=a=>{s(a),t(1)},x=g==null?void 0:g.map((a,u)=>({id:a.id_permohonan,no:u+1,noRekomendasi:a.no_skim,namaLengkap:a.nama_lengkap_pemohon,emailPemohon:a.email_pemohon||"-",tanggalLahir:a.tgl_lahir_pemohon,negaraAsal:a.kewarganegaraan_asal_pemohon_text,verifikasi:a.status_aktivitas}));return r.jsx(C,{className:"page-content bg-white",fluid:!0,children:r.jsx(w,{data:x,totalItems:e.totalData,currentPage:i,itemsPerPage:c,title:"Riwayat Permohonan",columns:v(f),enableSearch:!0,searchKeys:["nama_lengkap","negara_asal"],enablePagination:!0,url:"/pewarganegaraan/dashboard/detail-permohonan",emptyMessage:"Tidak ada permohonan yang cocok dengan pencarian Anda.",onPageChange:b,onSearch:k,loading:p})})};export{N as default};
