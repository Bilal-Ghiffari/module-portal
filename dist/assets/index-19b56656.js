import{u as W,r as p,a as E,h as G,i as q,a4 as J,Y as V,j as e,R as g,C as Y,b as o,c as v,n as z,o as Z,F as Q,p as X,q as I,s as ee,L as N,I as y,t as S,a5 as ae,B as D,Z as se,_ as le,a6 as ne,a7 as te,a8 as ie,w as oe,x as re,T as me}from"./index-d70a1868.js";import{T as ce}from"./TabContent-01c694f1.js";import{B as de}from"./Breadcrumb-e7c3d388.js";import{M as ue}from"./Modals-43a7b6ce.js";const K=[{link:"/",label:"Beranda"},{link:"/user-management/tabel-user",label:"User Management"}],xe=[{value:"L",label:"Laki-Laki"},{value:"P",label:"Perempuan"}],ge=[{value:"Ya",label:"Ya"},{value:"Tidak",label:"Tidak"}],ve=[{value:"NON ASN KKP",label:"NON ASN KKP"},{value:"ASN DINAS",label:"ASN DINAS"},{value:"NON ASN DINAS",label:"NON ASN DINAS"},{value:"NGO / LSM / Asosiasi",label:"NGO / LSM / Asosiasi"}],ye=[{value:"PNS",label:"PNS"},{value:"PPPK",label:"PPPK"}],Se=[{value:"ARUNA",label:"ARUNA"},{value:"HNSI",label:"HNSI"},{value:"KNTI",label:"KNTI"},{value:"MDPI",label:"MDPI"},{value:"NELANGSA",label:"NELANGSA"},{value:"USAID Ber-IKAN",label:"USAID Ber-IKAN"},{value:"WWF",label:"WWF"}],Pe=[{value:"PNS",label:"PNS"},{value:"P3K",label:"P3K"},{value:"Penyuluh Perikanan Bantu (PPB)",label:"Penyuluh Perikanan Bantu (PPB)"}],_e=[{value:"AHU",label:"AHU"},{value:"NON_AHU",label:"NON AHU"}];function Ae(){var k;document.title="User Management | AHU RI";const j=W(),[P,L]=p.useState(""),[_,O]=p.useState(!1),b=new me,F=E(),{list_dropdown_roles:h}=G(s=>s.Usman);p.useEffect(()=>{j(q(K)),j(J()),j(V())},[]);const f=()=>{O(!_),document.body.classList.add("no_padding")},B=s=>{const u=[...new Map(s.jenisUsman.map(n=>{var a;return[(a=n.jenis_role)==null?void 0:a.code,n]})).values()],r={fullname:ne(s.fullname),username:s.username,password:s.password,valid:"1",deleted:0,r_roles_code:u.map(n=>{var a,l;return(l=(a=n.jenis_role)==null?void 0:a.code)==null?void 0:l.toString()})},i=Object.fromEntries(Object.entries(r).filter(([n,a])=>a));L(i),f()},H=async()=>{try{b.customShowLoading({msg:"Menyimpan Data..."}),console.log("py",P),await te(ie,P),oe("Sukses"),F("/user-management/tabel-user")}catch(s){re(s)}finally{b.close()}f()},R=Array.from(new Map((k=h==null?void 0:h.data)==null?void 0:k.map(s=>[s.code,s])).values()),A=()=>{b.customWarningMsg("Harap Lengkapi dan Cek Kembali Inputan Anda")};return e.jsx(g.Fragment,{children:e.jsxs("div",{className:"page-content",children:[e.jsx(de,{content:K,title:"Tambah User Management"}),e.jsx(Y,{fluid:!0,children:e.jsx(o,{children:e.jsx(v,{lg:"12",children:e.jsx(z,{children:e.jsx(Z,{className:"p-5",children:e.jsx("div",{className:"wizard clearfix",children:e.jsx("div",{className:"content clearfix",children:e.jsx(ce,{className:"body pt-0",children:e.jsx(Q,{initialValues:{identifier:"",fullname:"",nik:"",no_hp:"",email:"",alamat:"",ngo_lsm_asosiasi:"",status_kepegawaian:"",eselon_1:"",eselon_2:"",upt:"",username:"",prov:"",kab:"",wilayah_prov:"",wilayah_kab:"",jenisUsman:[{jenis_role:"",jenis_modul:""}],penyuluh:"",status_penyuluh:""},validationSchema:X({fullname:I().required("Nama Lengkap Wajib Diisi"),username:I().required("Username Wajib Diisi")}),onSubmit:(s,{setSubmitting:u,validateForm:r})=>{r().then(i=>{Object.keys(i).length>0?A():B(s),u(!1)})},children:({handleChange:s,setValues:u,setFieldValue:r,handleBlur:i,handleSubmit:n,values:a,errors:l,touched:m,validateForm:T})=>{var w;return p.useMemo(()=>{var c;switch((c=a.identifier)==null?void 0:c.value){case"AHU":return{nip:!0,fullname:!0,nik:!0,no_hp:!0,email:!0,alamat:!0,prov:!0,kab:!0,eselon_1:!0,eselon_2:!0,upt:!0,status_kepegawaian_kkp:!0,penyuluh:!0,username:!0,role:!0};case"NON_AHU":return{fullname:!0,nik:!0,no_hp:!0,email:!0,alamat:!0,prov:!0,kab:!0,status_kepegawaian_NON_AHU:!0,ngo_lsm_asosiasi:!0,penyuluh:!0,username:!0,role:!0};default:return{}}},[(w=a.identifier)==null?void 0:w.value]),e.jsxs(ee,{onSubmit:n,className:"needs-validation",children:[e.jsxs(o,{className:"mb-3",children:[e.jsx(N,{htmlFor:"validationCustom01",className:"col-md-2 col-form-label",children:"Nama Lengkap"}),e.jsx("div",{className:"col-md-10",children:e.jsxs("div",{className:"d-flex flex-column align-items-start",children:[e.jsx(y,{name:"fullname",placeholder:"Nama Lengkap",type:"text",id:"validation1",onChange:s,onBlur:i,value:a.fullname,className:`form-control ${m.fullname&&l.fullname?"is-invalid":""}`}),m.fullname&&l.fullname?e.jsx(S,{type:"invalid",children:l.fullname}):null]})})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(N,{htmlFor:"validationCustom02",className:"col-md-2 col-form-label",children:"Username"}),e.jsx("div",{className:"col-md-10",children:e.jsxs("div",{className:"d-flex flex-column align-items-start",children:[e.jsx(y,{name:"username",placeholder:"Username",type:"text",id:"validation3",onChange:s,onBlur:i,value:(a==null?void 0:a.username)||"",className:`form-control input-type-number ${m.username&&l.username?"is-invalid":""}`}),m.username&&l.username?e.jsx(S,{type:"invalid",children:l.username}):null]})})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(N,{htmlFor:"validationCustom02",className:"col-md-2 col-form-label",children:"Password"}),e.jsx("div",{className:"col-md-10",children:e.jsxs("div",{className:"d-flex flex-column align-items-start",children:[e.jsx(y,{name:"password",placeholder:"Password",type:"password",id:"validation3",onChange:s,onBlur:i,value:(a==null?void 0:a.password)||"",className:`form-control input-type-number ${m.password&&l.password?"is-invalid":""}`}),m.password&&l.password?e.jsx(S,{type:"invalid",children:l.password}):null]})})]}),e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"mb-3",children:e.jsx("div",{children:e.jsx(g.Fragment,{children:e.jsx(ae,{name:"jenisUsman",children:({push:c,remove:x})=>{var U;return e.jsx(g.Fragment,{children:(U=a==null?void 0:a.jenisUsman)==null?void 0:U.map((pe,t)=>e.jsxs(o,{className:"bg-secondary bg-opacity-10 p-4 rounded mb-3",style:{rowGap:".5rem"},children:[e.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[e.jsx("div",{className:"fw-bold",children:"Hak Akses / Role"}),e.jsxs("div",{className:"d-flex",children:[e.jsx(D,{type:"button",color:"success",className:"btn-sm rounded me-2",onClick:()=>c({jenis_modul:"",jenis_role:""}),children:e.jsx("i",{className:"bx bx-plus fs-5"})}),t>0&&e.jsx(D,{type:"button",color:"danger",className:"btn-sm rounded",onClick:()=>x(t),children:e.jsx("i",{className:"bx bx-trash-alt fs-5"})})]})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(v,{md:2,children:e.jsx(N,{htmlFor:"validationCustom01",className:"col-form-label pb-0",children:"Jenis Role"})}),e.jsx(v,{md:10,children:e.jsx(se,{getOptionValue:d=>d.code,getOptionLabel:d=>d.title,onChange:d=>{var M;((M=a.jenisUsman)==null?void 0:M.find($=>{var C;return((C=$.jenis_role)==null?void 0:C.code)==d.code}))?r(`jenisUsman.${t}.jenis_role`,null):r(`jenisUsman.${t}.jenis_role`,d)},options:R,styles:le,value:a.jenisUsman[t].jenis_role,id:`jenisUsman.${t}.jenis_role`,name:`jenisUsman.${t}.jenis_role`,placeholder:"Pilih Jenis Role"})})]})]},t))})}})})})}),e.jsx("div",{className:"actions clearfix justify-content-end d-flex",children:e.jsx("button",{type:"button",onClick:c=>{c.preventDefault(),T().then(x=>{Object.keys(x).length>0?(n(),A(),console.log("formik",a)):n()})},className:"btn btn-primary",children:"Simpan"})})]})]})}})})})})})})})})}),e.jsx(ue,{modalBackdrop:_,modalPopup:f,approve:()=>H()})]})})}export{Ae as default,_e as optIdentifier,xe as optJnsKelamin,Se as optNGOLSM,ge as optPenyuluh,ye as optStatusPegawaiKKP,ve as optStatusPegawaiNonKKP,Pe as optStatusPenyuluh};
