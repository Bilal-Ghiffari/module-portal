import{j as a,aG as h,b8 as j,r as s,C as M,b as v,c as D}from"./index-59030646.js";import{C}from"./Card-c9e385e7.js";import{C as P}from"./CardContent-22b3255a.js";import{C as _}from"./auto-f5c48c80.js";import{a as T}from"./api-9cd47325.js";import{C as I}from"./Table-e25237b8.js";const N=({title:e,value:n,color:t,style:i})=>a.jsx(C,{sx:{width:"100%",height:"100%",border:"1px solid #E7E7E7",borderRadius:"8px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.05)",...i},children:a.jsx(P,{children:a.jsx(h,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{borderLeft:`3px solid ${t}`},children:a.jsxs(h,{sx:{width:"100%",paddingLeft:3},children:[a.jsx(j,{variant:"subtitle2",color:"",sx:{fontSize:"16px",fontWeight:500,fontFamily:"Poppins",borderBottom:"2px solid #E7E7E7",paddingBottom:1,color:"#262626"},children:e}),a.jsx(j,{variant:"h5",sx:{fontWeight:400,color:"#262626",mt:1,fontFamily:"Poppins",fontSize:"24px"},children:n})]})})})}),R=({fragments:e})=>a.jsx(h,{sx:{display:"flex",gap:2,flexWrap:"wrap",mb:3},children:e.map((n,t)=>a.jsx(h,{sx:{width:{xs:"100%",sm:"48%",md:"48%",lg:"24%"}},children:a.jsx(N,{...n})},t))}),z=[{title:"Total Permohonan",value:"4.680",color:"#60AAFA"},{title:"Total Belum Verifikasi",value:"4.680",color:"#F2933D"},{title:"Total Disetujui",value:"4.680",color:"#51B67D"},{title:"Total Ditolak",value:"4.680",color:"#EE7D7B"}],B={labels:["Jan","Feb","Mar","Apr","May","Jun"],data:[12e3,19e3,15e3,18e3,21e3,24e3]},F={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Okt","Nov","Des"],datasets:[{label:"Disetujui",data:[50,100,150,200,150,50,100,200,100,150,300,100],borderColor:"#1F7C4D",backgroundColor:"#fff",tension:.4},{label:"Ditolak",data:[10,20,50,60,100,50,200,150,75,90,10,100,20],borderColor:"#CF3533",backgroundColor:"#FDF3F3",tension:.4}]},G=[{id:"no",label:"No"},{id:"nama_lengkap",label:"Nama Lengkap"},{id:"negara_asal",label:"Negara Asal"},{id:"tanggal_permohonan",label:"Tanggal Permohonan"}],J=({title:e,data:n,labels:t,backgroundColor:i="rgba(54, 162, 235, 0.6)",borderColor:p="rgba(54, 162, 235, 1)",borderWidth:g=1,maintainAspectRatio:l=!0,aspectRatio:c=2})=>{const u=s.useRef(null),o=s.useRef(null);return s.useEffect(()=>{if(u.current){o.current&&o.current.destroy();const r=u.current.getContext("2d");o.current=new _(r,{type:"bar",data:{labels:t,datasets:[{label:e,data:n,backgroundColor:i,borderColor:p,borderWidth:g}]},options:{responsive:!0,maintainAspectRatio:l,aspectRatio:c,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(x){return`${x.dataset.label}: ${x.raw}`}}}},scales:{y:{beginAtZero:!0,grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.05)"},ticks:{stepSize:Math.ceil(Math.max(...n)/5)}},x:{grid:{display:!1,drawBorder:!1}}}}})}return()=>{o.current&&o.current.destroy()}},[n,t,e,i,p,g,l,c]),a.jsx(C,{sx:{width:"100%",height:"100%",border:"1px solid #E7E7E7",borderRadius:"8px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.05)",p:2},children:a.jsxs(P,{children:[a.jsx(h,{sx:{borderBottom:"1px solid #E7E7E7",marginBottom:3},children:a.jsx(j,{variant:"h6",gutterBottom:!0,sx:{color:"#202020",fontFamily:"Poppins",fontSize:"16px"},children:e})}),a.jsx("div",{style:{position:"relative",height:"300px"},children:a.jsx("canvas",{ref:u})})]})})},$=({title:e,data:n,labels:t,datasets:i=null,backgroundColor:p="rgba(54, 162, 235, 0.2)",borderColor:g="rgba(54, 162, 235, 1)",borderWidth:l=2,pointBackgroundColor:c="rgba(54, 162, 235, 1)",pointRadius:u=4,pointHoverRadius:o=6,fill:r=!1,tension:x=.4,maintainAspectRatio:f=!0,aspectRatio:d=2,showLegend:b=!1,yAxisTitle:y="",xAxisTitle:w=""})=>{const E=s.useRef(null),m=s.useRef(null);return s.useEffect(()=>{if(E.current){m.current&&m.current.destroy();const A=E.current.getContext("2d"),L=i||[{label:e,data:n,backgroundColor:p,borderColor:g,borderWidth:l,pointBackgroundColor:c,pointRadius:u,pointHoverRadius:o,fill:r,tension:x}];m.current=new _(A,{type:"line",data:{labels:t,datasets:L},options:{responsive:!0,maintainAspectRatio:f,aspectRatio:d,plugins:{legend:{display:b,position:"bottom"},tooltip:{callbacks:{label:function(S){return`${S.dataset.label}: ${S.raw}`}}},title:{display:!1}},scales:{y:{beginAtZero:!1,title:{display:!!y,text:y},grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.05)"}},x:{title:{display:!!w,text:w},grid:{display:!1,drawBorder:!1}}},interaction:{intersect:!1,mode:"index"}}})}return()=>{m.current&&m.current.destroy()}},[n,t,e,p,g,l,c,u,o,r,x,f,d,b,y,w,i]),a.jsx(C,{sx:{width:"100%",height:"100%",border:"1px solid #E7E7E7",borderRadius:"8px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.05)",p:2},children:a.jsxs(P,{children:[a.jsx(h,{sx:{borderBottom:"1px solid #E7E7E7",marginBottom:3},children:a.jsx(j,{variant:"h6",gutterBottom:!0,sx:{color:"#202020",fontFamily:"Poppins",fontSize:"16px"},children:e})}),a.jsx("div",{style:{position:"relative",height:"auto",width:"100%"},children:a.jsx("canvas",{ref:E})})]})})},k={currentPage:1,totalPage:1,totalData:0},K=(e={page:1,limit:10})=>{const[n,t]=s.useState([]),[i,p]=s.useState(!0),[g,l]=s.useState(null),[c,u]=s.useState(k);return s.useEffect(()=>{const o=new AbortController;return(async()=>{p(!0),l(null);try{const r=await T(e,{signal:o.signal});t((r==null?void 0:r.data)||[]),u((r==null?void 0:r.pagination)||k)}catch(r){r.name!=="AbortError"&&(l(r),t([]))}finally{p(!1)}})(),()=>o.abort()},[e.page,e.limit]),{data:n,loading:i,error:g,pagination:c,totalItems:c.totalData}},Q=()=>{const[e,n]=s.useState(1),[t,i]=s.useState(10),[p,g]=s.useState(""),{data:l,loading:c,error:u,pagination:o}=K({page:e,limit:t}),r=(l==null?void 0:l.map((d,b)=>({no:(e-1)*t+b+1,nama_lengkap:d.nama_lengkap_pemohon,negara_asal:d.negara_tinggal_pemohon_text||"-",tanggal_permohonan:new Date(d.created_at).toLocaleDateString("id-ID")})))||[],x=d=>{n(d)},f=d=>{g(d),n(1)};return a.jsxs(M,{className:"page-content bg-white",fluid:!0,children:[a.jsx(R,{fragments:z}),a.jsxs(v,{style:{marginTop:"20px"},children:[a.jsx(D,{xs:"12",sm:"12",md:"12",lg:"6",xl:"6",children:a.jsx(J,{title:"Grafik Permohonan",data:B.data,labels:B.labels,backgroundColor:"#93C9FD"})}),a.jsx(D,{xs:"12",sm:"12",md:"12",lg:"6",xl:"6",children:a.jsx(I,{data:r,totalItems:o.totalData,currentPage:e,itemsPerPage:t,title:"Riwayat Permohonan",columns:G,enableSearch:!0,searchKeys:["nama_lengkap","negara_asal"],enablePagination:!0,emptyMessage:"Tidak ada permohonan tersedia.",onPageChange:x,onSearch:f,loading:c})})]}),a.jsx(v,{style:{marginTop:"20px"},children:a.jsx(D,{xs:12,children:a.jsx($,{title:"Grafik Permohonan",labels:F.labels,datasets:F.datasets,showLegend:!0,yAxisTitle:"Number of Users"})})})]})};export{Q as default};
