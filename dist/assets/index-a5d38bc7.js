import{u as N,a as A,r,h as _,i as T,am as x,j as e,R as C,C as E,b as S,c as m,an as p,I as W,B as L,T as I,ao as D,ap as j}from"./index-d70a1868.js";import{B as R}from"./Breadcrumb-e7c3d388.js";import{E as B,T as O}from"./ExportExcelDatis-5a733838.js";import{a as l}from"./changeTimeIndo-f11d9ea6.js";const v=[{link:"/user-management/tabel-user",label:"Beranda"},{link:"/",label:"User Management"},{link:"/",label:"Log Aktivitas User"}],U=[{name:"USERNAME",selector:s=>s.username||"-",sortable:!0,cell:s=>e.jsx("div",{children:s.username||"-"})},{name:"WAKTU AKTIVITAS",selector:s=>l(s.updated_at)||"-",cell:s=>e.jsx("div",{children:l(s.updated_at)||"-"})},{name:"AKTIVITAS",selector:s=>s.last_activity||"-",cell:s=>e.jsx("div",{children:s.last_activity||"-"})},{name:"LOGIN",selector:s=>l(s.logged_in)||"-",cell:s=>e.jsx("div",{children:l(s.logged_in)||"-"})},{name:"LOGOUT",selector:s=>{s.logged_out===null||l(s.logged_out)},cell:s=>e.jsx("div",{children:s.logged_out===null?"-":l(s.logged_out)})},{name:"BROWSER",selector:s=>s.user_agent||"-",cell:s=>{const c=s.user_agent?s.user_agent.split(/[\(\)]| /).filter(Boolean):["-"];return e.jsx("div",{children:c.map((o,d)=>e.jsx("div",{style:{paddingBottom:"10px"},children:o},d))})}}],M={rows:{style:{minHeight:"30px","&:nth-of-type(odd)":{backgroundColor:"#f3f3f3"},"&:nth-of-type(even)":{backgroundColor:"#ffffff"}}},headCells:{style:{backgroundColor:"#2A3042",fontSize:"12px",fontWeight:"bold",color:"white",margin:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"160px",maxWidth:"160px"}},cells:{style:{padding:"8px 16px"}}},H=({titleBreadcrumb:s})=>{const c=N();A();const o=new I,[d,g]=r.useState(!0),[t,u]=r.useState({}),h=r.useRef(null),b=async()=>{const a={...d};delete a.limit,delete a.page;try{const n=await D({...a,limit:1e3});h.current&&h.current.downloadExcel(n.data)}catch(n){errorMsg(n)}},{list_data_log:i}=_(a=>a.Usman);r.useEffect(()=>{c(T(v)),c(x())},[]);const f=r.useMemo(()=>[{name:e.jsx("div",{className:"fw-semibold ",children:"USERNAME"}),minWidth:"150px",selector:a=>a.username||"-",sortable:!0,cell:a=>e.jsx("div",{children:a.username||"-"})},{name:e.jsx("div",{className:"fw-semibold ",children:"WAKTU AKTIVITAS"}),minWidth:"150px",selector:a=>l(a.updated_at)||"-",cell:a=>e.jsx("div",{children:l(a.updated_at)||"-"})},{name:e.jsx("div",{className:"fw-semibold ",children:"AKTIVITAS"}),minWidth:"150px",selector:a=>a.last_activity||"-",cell:a=>e.jsx("div",{children:a.last_activity||"-"})},{name:e.jsx("div",{className:"fw-semibold ",children:"LOGIN"}),minWidth:"150px",selector:a=>l(a.logged_in)||"-",cell:a=>e.jsx("div",{children:l(a.logged_in)||"-"})},{name:e.jsx("div",{className:"fw-semibold ",children:"LOGOUT"}),minWidth:"150px",selector:a=>{a.logged_out===null||l(a.logged_out)},cell:a=>e.jsx("div",{children:a.logged_out===null?"-":l(a.logged_out)})},{name:e.jsx("div",{className:"fw-semibold ",children:"BROWSER"}),minWidth:"150px",selector:a=>a.user_agent||"-",cell:a=>e.jsx("div",{children:a.user_agent||"-"})}]),w=()=>{const a={awal:(t==null?void 0:t.awal)&&j(t==null?void 0:t.awal)||"",akhir:(t==null?void 0:t.akhir)&&j(t==null?void 0:t.akhir)||"",search:(t==null?void 0:t.search)||"",limit:10,page:1},n=Object.fromEntries(Object.entries(a).filter(([K,k])=>k));o.showLoading(),g(n),c(x(n))};r.useEffect(()=>{i&&o.close()},[i]);const y=a=>{const n={...d,page:a};g(n),c(x(n))};return e.jsx(C.Fragment,{children:e.jsx("div",{className:"page-content",children:e.jsxs(E,{fluid:!0,children:[e.jsx(R,{content:v,title:"Log Aktifitas User"}),e.jsxs("div",{className:"shadow-md rounded-3 bg-white p-5 mb-5",children:[e.jsxs(S,{className:"row-gap-3 p-3 rounded bg-secondary-subtle",children:[e.jsx(m,{lg:4,children:e.jsx("div",{children:e.jsx(p,{text:"Waktu Aktivitas Awal",handleChange:a=>u({...t,awal:a.target.value}),value:t.awal})})}),e.jsx(m,{lg:4,children:e.jsx("div",{children:e.jsx(p,{text:"Waktu Aktivitas Akhir",handleChange:a=>u({...t,akhir:a.target.value}),value:t.akhir})})}),e.jsx(m,{md:6,lg:3,children:e.jsx(W,{name:"cari",placeholder:"Username",onChange:a=>u({...t,search:a.target.value}),value:t.search,className:"select2-selection"})}),e.jsx(m,{md:6,lg:1,children:e.jsx(L,{type:"button",color:"primary",className:"btn-md rounded px-4",onClick:()=>{w()},children:"Cari"})})]}),e.jsxs("div",{className:"d-flex mt-4 justify-content-between align-items-center",children:[e.jsx("div",{className:"fs-3 fw-semibold",children:"Data Log"}),e.jsxs("div",{className:"pb-0 mb-0",children:[e.jsx("button",{type:"button",className:"btn btn-success shadow-lg",style:{minWidth:"150px",maxWidth:"150px",width:"150px"},onClick:b,children:"Export to Excel"}),e.jsx("div",{className:"d-none",children:e.jsx(B,{ref:h,name:"Data Log - Excel",header:U})})]})]}),e.jsx(O,{dataTotal:i==null?void 0:i.total_count,pagination:!0,customStyles:M,data:i==null?void 0:i.data,columns:f,pageNow:y,selectedColumns:[],customClass:"pb-5"})]})]})})})};export{H as default};
