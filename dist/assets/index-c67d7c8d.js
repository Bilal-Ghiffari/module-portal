import{p as J,q as w,c8 as ua,r as p,a as va,ex as Fa,w as sa,x as ra,T as ha,ey as Ea,j as a,aG as K,bU as M,bp as Na,bV as Aa,bW as Ta,bX as Ka,cm as Ia,A as _a,bw as Ca,s as ma,b,c as t,bY as E,bZ as Da,b_ as fa,b$ as qa,h as oa,c0 as aa,c1 as ya,c2 as ta,c3 as Ba,c4 as Ua,c5 as Ra,L as La,I as Ma,B as ia,co as za,cs as Va,cp as Ha,cq as Wa,cr as Oa,t as $a,c7 as H,ez as Ja,eA as Ga,eB as Ya,b8 as xa,u as Xa,c9 as Za,ca as Qa,cb as ae,cc as ee,cd as ne,ce as se,cf as te,cg as ie,ch as re}from"./index-d70a1868.js";import{p as I}from"./fileValidation-8f811c9b.js";import{D as le}from"./Drafts-20e019c2.js";import{A as oe,p as de,S as ue}from"./image 34-b5ebfa82.js";import{F as T}from"./AutoComplete-58b5ae20.js";import{f as Q}from"./changeTimeIndo-f11d9ea6.js";import{R as ce,C as pe}from"./Row-c675dac8.js";import"./DialogActions-557a410c.js";const na=[["voucher"],["nama_lengkap_pemohon","id_kewarganegaraan_asal_pemohon","id_negara_lahir_pemohon","tgl_lahir_pemohon","jenis_kelamin_pemohon","agama_pemohon","id_pekerjaan_pemohon","status_kawin","tgl_kawin","no_buku_nikah","no_skim","id_provinsi_pemohon","id_kab_kota_pemohon","id_kec_pemohon","id_desa_kel_pemohon","no_telp_pemohon","email_pemohon","rt","rw","kode_pos","alamat_pemohon"],["nama_pasangan","nik_pasangan","no_telp_pasangan","email_pasangan","tempat_lahir_pasangan","id_provinsi_lahir_pasangan","id_kab_kota_lahir_pasangan","id_negara_lahir_pasangan","tgl_lahir_pasangan","id_pekerjaan_pasangan","id_kewarganegaraan_pasangan","jenis_kelamin_pasangan","agama_pasangan"],["suratPermohonan"],["fotokopiAktaKelahiran","fotokopiKitap","fotokopiAktaKelahiranPasangan","fotokopiKtpPasangan","fotokopiAktaPerkawinan","suratKeteranganImigrasi","sckcAsli","suratPerwakilanNegara","pasfoto","suratKeteranganSehat","buktiPembayaran","suratPermohonanTertulis","suratPernyataanAlasan","suratPernyataanBerbahasa","suratPernyataanNama","suratPernyataanKesetiaan"]],he=(e,n)=>e.filter(o=>n.includes(o.id)),ge=(e,n)=>e.findIndex(o=>o.id===(n==null?void 0:n.id)),me=e=>e!=null&&e!==""&&!(Array.isArray(e)&&e.length===0)&&!(typeof e=="object"&&e!==null&&Object.keys(e).length===0),ca=(e,n)=>n.reduce((o,u)=>{const i=e[u];return me(i)&&(o[u]=i),o},{}),ka=/^[A-Za-z\s'-]+$/,ja=["Dalam Negeri"],xe=["Luar Negeri"],la={0:J({voucher:w().required("Voucher wajib diisi")}),1:J({nama_lengkap_pemohon:w().min(2,"Nama lengkap minimal 2 karakter").max(100,"Nama lengkap maksimal 100 karakter").matches(ka,"Nama hanya boleh huruf, spasi, apostrof ('), dan tanda hubung (-)").required("Nama lengkap wajib diisi"),id_kewarganegaraan_asal_pemohon:w().required("Kewarganegaraan wajib diisi"),id_negara_lahir_pemohon:w().required("Negara lahir wajib diisi"),tgl_lahir_pemohon:ua().required("Tanggal lahir wajib diisi"),jenis_kelamin_pemohon:w().required("Jenis kelamin wajib diisi"),agama_pemohon:w().required("Agama wajib diisi"),id_pekerjaan_pemohon:w().required("Pekerjaan wajib diisi"),status_kawin:w().required("Status perkawinan wajib diisi"),tgl_kawin:ua().nullable().required("Tanggal pernikahan wajib diisi"),no_buku_nikah:w().required("Nomor buku nikah wajib diisi"),no_skim:w().required("Nomor surat keterangan Keimigrasian wajib diisi"),id_provinsi_pemohon:w().required("Provinsi wajib diisi"),id_kab_kota_pemohon:w().required("Kabupaten/Kota wajib diisi"),id_kec_pemohon:w().required("Kecamatan wajib diisi"),id_desa_kel_pemohon:w().required("Kelurahan wajib diisi"),no_telp_pemohon:w().matches(/^[0-9]+$/,"Nomor HP hanya boleh angka").required("No telepon wajib diisi"),email_pemohon:w().email("Email tidak valid").required("Email wajib diisi"),rt:w().required("RT wajib diisi"),rw:w().required("RW wajib diisi"),kode_pos:w().required("Kode pos wajib diisi"),alamat_pemohon:w().min(5,"Alamat rumah minimal 5 karakter").max(255,"Alamat rumah maksimal 255 karakter").required("Alamat rumah wajib diisi")}),2:J({nama_pasangan:w().min(2,"Nama lengkap minimal 2 karakter").max(100,"Nama lengkap maksimal 100 karakter").matches(ka,"Nama hanya boleh huruf, spasi, apostrof ('), dan tanda hubung (-)").required("Nama pasangan wajib diisi"),nik_pasangan:w().matches(/^[0-9]{16}$/,"NIK harus 16 digit angka").required("NIK pasangan wajib diisi"),no_telp_pasangan:w().required("Nomor HP pasangan wajib diisi"),email_pasangan:w().email("Email tidak valid").required("Email pasangan wajib diisi"),tempat_lahir_pasangan:w().required("Tempat lahir wajib dipilih"),id_provinsi_lahir_pasangan:w().when("tempat_lahir_pasangan",{is:e=>ja.includes(e),then:e=>e.required("Provinsi pasangan wajib diisi"),otherwise:e=>e.notRequired()}),id_kab_kota_lahir_pasangan:w().when("tempat_lahir_pasangan",{is:e=>ja.includes(e),then:e=>e.required("Kabupaten/Kota pasangan wajib diisi"),otherwise:e=>e.notRequired()}),id_negara_lahir_pasangan:w().when("tempat_lahir_pasangan",{is:e=>xe.includes(e),then:e=>e.required("Negara pasangan wajib diisi"),otherwise:e=>e.notRequired()}),tgl_lahir_pasangan:ua().required("Tanggal lahir pasangan wajib diisi"),id_pekerjaan_pasangan:w().required("Pekerjaan pasangan wajib diisi"),jenis_kelamin_pasangan:w().required("Jenis kelamin pasangan wajib diisi"),agama_pasangan:w().required("Agama pasangan wajib diisi")}),3:J({suratPermohonan:w().required("Anda harus menyetujui bahwa data yang diisi sudah benar").oneOf(["1"],"Anda harus menyetujui bahwa data yang diisi sudah benar")}),4:J({fotokopiAktaKelahiran:I,fotokopiKitap:I,fotokopiAktaKelahiranPasangan:I,fotokopiKtpPasangan:I,fotokopiAktaPerkawinan:I,suratKeteranganImigrasi:I,sckcAsli:I,suratPerwakilanNegara:I,pasfoto:I,suratKeteranganSehat:I,buktiPembayaran:I,suratPermohonanTertulis:I,suratPernyataanAlasan:I,suratPernyataanBerbahasa:I,suratPernyataanNama:I,suratPernyataanKesetiaan:I})},ke=(e,n,o)=>{const u=new ha,[i,h]=p.useState(!1),g=va();return{handleSubmit:p.useCallback(async(r,s,c,l,x)=>{var j;if(console.log("=== SUBMIT HANDLER ==="),console.log("Active Step:",r),console.log("Current Formik Values:",s.values),r!==5){console.log("❌ Not on final step, cannot submit");return}h(!0),x(!0);try{const m={id_permohonan:e,status_permohonan:1,status_aktivitas:2};if(console.log("Final submission payload:",m),await u.customConfirmation("Apakah anda yakin data anda sudah sesuai?")){const _=await Fa(m);if(console.log("✅ Submission response:",_),_&&_.message==="Success")localStorage.removeItem("id_permohonan_pewarganegaraan"),sa("Berhasil Membuat Permohonan! Redirecting..."),setTimeout(()=>{g("/pewarganegaraan/dashboard")},3e3);else throw new Error((_==null?void 0:_.message)||"Submission failed")}}catch(m){if(console.error("❌ Submission error:",m),m.response){const F=((j=m.response.data)==null?void 0:j.message)||"Terjadi kesalahan pada server";ra(F)}else m.request?ra("Gagal terhubung ke server. Periksa koneksi internet."):ra(m.message||"Terjadi kesalahan tidak terduga")}finally{h(!1),x(!1),console.log("=== END SUBMIT HANDLER ===")}},[e,n,o,u,g]),submitLoading:i}},ga=()=>{try{const e=localStorage.getItem("id_permohonan_pewarganegaraan");return e?JSON.parse(e):null}catch(e){return console.error("Error retrieving currentPermohonanId from localStorage:",e),null}};function Pa(){return Math.floor(1e5+Math.random()*9e5)}function je(){const[e,n]=p.useState(!1),[o,u]=p.useState(null),[i,h]=p.useState(null),g=ga();return{patchPermohonan:async r=>{console.log("Data Patch",r),n(!0),u(null);try{const s=Pa(),c=await Ea({id_voucher:s,id_permohonan:g,...r});return console.log("Patch response",c),h(c),c}catch(s){throw u(s),s}finally{n(!1)}},loading:e,error:o,response:i}}const be=({handleSubmit:e,handleNext:n,handleBack:o,handleDraft:u,activeStep:i,stepsResult:h,isSubmitting:g=!1,postLoading:d=!1,patchLoading:r=!1})=>{const s=i===5,c=i===0,l=i===3,x=i===4;return console.log("Current Step",i),a.jsxs(K,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:0,pt:2,px:2},children:[i>1&&a.jsx(M,{text:"Kembali",bgColor:"transparent",border:"1px solid #E7E7E7",textColor:"#041662",disabled:c,onClick:o}),!c&&!l&&!x&&!s&&a.jsx(M,{text:"Draft",bgColor:"#f97316",border:"1px solid #E7E7E7",textColor:"#fff",hoverColor:"#ea580c",onClick:u,rightIcon:a.jsx(le,{fontSize:"14px"}),loading:r||d}),!s&&a.jsx(M,{onClick:n,text:"Selanjutnya",bgColor:"#041662",hoverColor:"#1e40af",loading:r||d}),s&&a.jsx(M,{onClick:e,text:"Submit Permohonan",bgColor:"#041662",hoverColor:"#1e40af"})]})},_e=be,fe=({steps:e,activeStep:n,isStepSkipped:o,isStepValid:u,isStepHasError:i})=>(Na(),a.jsx(Aa,{activeStep:n,alternativeLabel:!0,sx:{"& .MuiStepConnector-root":{top:10,left:"calc(-50% + 16px)",right:"calc(50% + 16px)"},"& .MuiStepConnector-line":{borderTopStyle:"dashed",borderTopWidth:2,borderColor:"#E7E7E7"},"& .MuiStepConnector-active .MuiStepConnector-line":{borderColor:"#041662"},"& .MuiStepConnector-completed .MuiStepConnector-line":{borderColor:"#041662"}},children:e.map((h,g)=>{const d={};return o(g)&&(d.completed=!1),a.jsx(Ta,{...d,children:a.jsx(Ka,{children:a.jsx("span",{style:{fontFamily:"Poppins",fontWeight:400,fontSize:"12px",lineHeight:"18px",color:"#888888"},children:h.label})})},h.id)})})),ye=fe,Pe=J().shape({jumlahPembelian:Ia().typeError("Harus berupa angka").required("Jumlah pembelian wajib diisi").min(1,"Jumlah pembelian minimal 1"),subLayanan:w().required("Sub layanan wajib dipilih")});function we(){const[e,n]=p.useState(!1),[o,u]=p.useState(1),i=()=>{n(!0),u(1)},h=()=>{n(!1),u(1)},g=[{label:"Pewarganegaraan berdasarkan perkawinan campuran",value:"Pewarganegaraan berdasarkan perkawinan campuran"}],d=_a({enableReinitialize:!0,initialValues:{jumlahPembelian:1,subLayanan:""},validationSchema:Pe,onSubmit:c=>{u(2)}}),r=()=>o===1?a.jsx(ma,{onSubmit:d.handleSubmit,children:a.jsxs(b,{children:[a.jsx(t,{xs:"12",children:a.jsx(E,{formik:d,name:"jumlahPembelian",placeholder:"Tulis jumlah pembelian",required:!0,type:"number",readonly:!0})}),a.jsx(t,{xs:"12",children:a.jsx(Da,{formik:d,name:"subLayanan",placeholder:"Pilih sub layanan jasa hukum",options:g,required:!0})})]})}):o===2?a.jsx(ma,{children:a.jsx(b,{children:a.jsx(t,{xs:"12",children:a.jsxs("div",{children:[a.jsx("img",{src:de,alt:"Panduan Pembayaran",style:{maxWidth:"100%",margin:"16px 0"}}),a.jsx(M,{onClick:d.handleSubmit,text:"Download",leftIcon:a.jsx(ue,{}),textColor:"#041662",bgColor:"transparent",border:"1px solid #E7E7E7",hoverColor:"#041992"}),a.jsx("p",{style:{color:"#6D6D6D",fontFamily:"Poppins",fontWeight:400,fontSize:"14px"},children:'Apabila telah melakukan pembayaran tetapi status pembayaran "belum bayar", Anda dapat melakukan konfirmasi pembayaran pada menu konfirmasi pembayaran.'}),a.jsx("p",{style:{color:"#6D6D6D",fontFamily:"Poppins",fontWeight:400,fontSize:"14px"},children:"Apabila masih terdapat kendala terkait pembayaran PNBP, Anda dapat melakukan konsultasi pada menu Konsultasi Pembayaran."}),a.jsx("p",{style:{color:"#6D6D6D",fontFamily:"Poppins",fontWeight:400,fontSize:"14px"},children:"Untuk panduan cara pembayaran dapat diakses pada link berikut."})]})})})}):null,s=()=>{if(o===1)return a.jsxs(a.Fragment,{children:[a.jsx(M,{text:"Kembali",onClick:h,textColor:"#041662",bgColor:"transparent",border:"1px solid #E7E7E7"}),a.jsx(M,{text:"Selanjutnya",rightIcon:a.jsx(fa,{}),onClick:d.handleSubmit,bgColor:"#041662",textColor:"#fff",hoverColor:"#041992"})]});if(o===2)return a.jsxs(a.Fragment,{children:[a.jsx(M,{text:"Sebelumnya",onClick:()=>u(1),textColor:"#041662",bgColor:"transparent",border:"1px solid #E7E7E7",hoverColor:"#041992"}),a.jsx(M,{onClick:()=>h(),text:"Selanjutnya",rightIcon:a.jsx(qa,{})})]})};return a.jsxs(a.Fragment,{children:[a.jsx(Ca,{style:{textDecoration:"underline",color:"#041662",fontWeight:500,fontSize:"14px",fontFamily:"Poppins",textTransform:"initial"},onClick:i,children:"Beli Voucher di SIMPADHU"}),a.jsx(oe,{open:e,onClose:h,title:"Pembelian Voucher",description:o===1?"Silahkan pilih layanan yang anda inginkan":"Berikut adalah bukti pemesanan voucher anda",actions:s(),children:r()})]})}const Se=({formik:e,setActiveStep:n,label:o})=>{const u=()=>{!e.errors.voucher&&e.values.voucher?n(i=>i+1):e.setFieldTouched("voucher",!0)};return a.jsx("div",{className:"page-content d-flex justify-content-center align-items-center px-2 mb-3",style:{fontFamily:"Poppins"},children:a.jsxs("div",{className:"d-flex flex-column w-100",style:{maxWidth:800},children:[a.jsx(b,{className:"justify-content-center mb-2",children:a.jsxs(t,{lg:"10",children:[a.jsx("h4",{style:{color:"#041662",fontWeight:500,fontSize:"28px",lineHeight:"52px"},children:"Pendaftaran Pewarganegaraan Berdasarkan Perkawinan Campuran"}),a.jsx("hr",{})]})}),a.jsx(b,{className:"justify-content-center mb-2",children:a.jsx(t,{lg:"10",children:a.jsx("p",{style:{color:"#5D5D5D",fontSize:"14px",fontWeight:500,lineHeight:"26px"},children:"Anda akan memulai proses pendaftaran pewarganegaraan berdasarkan perkawinan campuran. Pastikan Anda telah menyiapkan dokumen dan informasi yang dibutuhkan sebelum melanjutkan."})})}),a.jsx(b,{className:"justify-content-center mb-2",children:a.jsxs(t,{lg:"10",children:[a.jsx("p",{style:{color:"#5D5D5D",fontSize:"14px",lineHeight:"26px",fontWeight:500},children:"Untuk melanjutkan, Anda perlu memasukkan kode voucher pendaftaran terlebih dahulu."}),a.jsx(E,{formik:e,type:"text",name:"voucher",placeholder:"Tulis Kode Voucher Anda Di Sini",className:"mt-2 form-field-input"})]})}),a.jsx(b,{className:"justify-content-center",children:a.jsxs(t,{lg:"10",children:[a.jsx("p",{style:{color:"#5D5D5D",fontSize:"14px",lineHeight:"26px",fontWeight:500},children:"Jika Anda belum memiliki kode voucher, silakan melakukan pembelian melalui layanan SIMPADHU pada tautan berikut:"}),a.jsx(we,{})]})}),a.jsx(b,{className:"justify-content-center",children:a.jsx(t,{lg:"10",children:a.jsx(M,{bgColor:"#041662",textColor:"#fff",hoverColor:"#041992",text:"Mulai Pendaftaran",rightIcon:a.jsx(fa,{}),onClick:u})})})]})})},pa={countryOption:[{label:"USA",value:"USA"},{label:"Belgia",value:"Belgia"}],genderOption:[{label:"Laki-laki",value:"L"},{label:"Perempuan",value:"P"}],mariedOption:[{value:"Kawin",label:"Kawin"},{value:"Belum Kawin",label:"Belum Kawin"},{value:"Cerai Hidup",label:"Cerai Hidup"},{value:"Cerai Mati",label:"Cerai Mati"}],bornOption:[{value:"Dalam Negeri",label:"Dalam Negeri"},{value:"Luar Negeri",label:"Luar Negeri"}],agamaOption:[{value:"Islam",label:"Islam"},{value:"Kristen",label:"Kristen"},{value:"Katolik",label:"Katolik"},{value:"Hindu",label:"Hindu"},{value:"Buddha",label:"Buddha"},{value:"Konghucu",label:"Konghucu"},{value:"Lainnya",label:"Lainnya"}],jobOption:[{value:"PNS",label:"Pegawai Negeri Sipil"},{value:"TNI/POLRI",label:"TNI/POLRI"},{value:"Karyawan Swasta",label:"Karyawan Swasta"},{value:"Wiraswasta",label:"Wiraswasta"},{value:"Pelajar/Mahasiswa",label:"Pelajar/Mahasiswa"},{value:"Ibu Rumah Tangga",label:"Ibu Rumah Tangga"},{value:"Pensiunan",label:"Pensiunan"},{value:"Lainnya",label:"Lainnya"}],provinsiOption:[{value:"Jawa Barat",label:"Jawa Barat"},{value:"DKI Jakarta",label:"DKI Jakarta"}],kabkotOption:[{value:"Bekasi",label:"Bekasi"},{value:"Bandung",label:"Bandung"},{value:"Jakarta Pusat",label:"Jakarta Pusat"}],kecOption:[{value:"Bantar Gebang",label:"Bantar Gebang"},{value:"Cikarang Barat",label:"Cikarang Barat"},{value:"Tambun Selatan",label:"Tambun Selatan"}],kelOption:[{value:"Mustika Jaya",label:"Mustika Jaya"},{value:"Pekayon Jaya",label:"Pekayon Jaya"},{value:"Jati Asih",label:"Jati Asih"}],kelaminOption:[{value:"L",label:"Laki-laki"},{value:"P",label:"Perempuan"}]},ve=({formik:e})=>{const{pekerjaan:n,agama:o,negara:u}=oa(i=>i.master);return a.jsxs(a.Fragment,{children:[a.jsx(aa,{title:"Informasi Pribadi"}),a.jsxs(K,{className:"form-horizontal",children:[a.jsxs(b,{children:[a.jsx(t,{xs:"12",md:"12",lg:"12",xl:"6",children:a.jsx(E,{formik:e,name:"nama_lengkap_pemohon",placeholder:"Tulis nama lengkap",title:"Nama Lengkap",required:!0})}),a.jsx(t,{xs:"12",md:"12",lg:"12",xl:"6",children:a.jsx(T,{formik:e,name:"id_kewarganegaraan_asal_pemohon",placeholder:"Pilih kewarganegaraan",options:u.data,title:"Kewarganegaraan asal",required:!0})})]}),a.jsxs(b,{children:[a.jsx(t,{xs:"12",md:"12",lg:"12",xl:"6",children:a.jsx(T,{formik:e,name:"id_negara_lahir_pemohon",placeholder:"negara tempat lahir",title:"Tempat Lahir",options:u.data,required:!0})}),a.jsx(t,{xs:"12",md:"12",lg:"12",xl:"6",children:a.jsx(E,{formik:e,name:"tgl_lahir_pemohon",type:"date",placeholder:"Tanggal Lahir",title:"Tanggal Lahir",required:!0})})]}),a.jsxs(b,{children:[a.jsx(t,{xs:"12",md:"12",lg:"12",xl:"6",children:a.jsx(T,{formik:e,name:"jenis_kelamin_pemohon",placeholder:"jenis kelamin",title:"Jenis Kelamin",options:pa.kelaminOption,required:!0})}),a.jsx(t,{xs:"12",md:"12",lg:"12",xl:"6",children:a.jsx(T,{formik:e,name:"agama_pemohon",placeholder:"agama sesuai identitas",title:"Agama",options:o.data,required:!0})})]}),a.jsx(b,{children:a.jsx(T,{formik:e,name:"id_pekerjaan_pemohon",placeholder:"pekerjaan saat ini",title:"Pekerjaan",options:n.data,required:!0})})]})]})},Fe=({formik:e})=>{const{values:n}=e,{provinsi:o,kotakab:u,kecamatan:i,desa:h,negara:g}=oa(d=>d.master);return a.jsxs(a.Fragment,{children:[a.jsx(aa,{title:"Informasi Alamat"}),a.jsxs(K,{className:"form-horizontal",children:[a.jsxs(b,{children:[a.jsx(t,{xs:"12",md:"6",lg:"6",xl:"3",children:a.jsx(T,{formik:e,name:"id_provinsi_pemohon",title:"Provinsi",options:o.data,placeholder:"Provinsi",required:!0})}),a.jsx(t,{xs:"12",md:"6",lg:"6",xl:"3",children:a.jsx(T,{formik:e,name:"id_kab_kota_pemohon",title:"Kabupaten/Kota",options:u.data,placeholder:"Kabupaten/Kota",isDisabled:!n.id_provinsi_pemohon,required:!0})}),a.jsx(t,{xs:"12",md:"6",lg:"6",xl:"3",children:a.jsx(T,{formik:e,name:"id_kec_pemohon",title:"Kecamatan",options:i.data,placeholder:"Kecamatan",isDisabled:!n.id_kab_kota_pemohon,required:!0})}),a.jsx(t,{xs:"12",md:"6",lg:"6",xl:"3",children:a.jsx(T,{formik:e,name:"id_desa_kel_pemohon",title:"Kelurahan",options:h.data,placeholder:"Kelurahan",isDisabled:!n.id_kec_pemohon,required:!0})})]}),a.jsxs(b,{children:[a.jsx(t,{xs:"12",md:"4",lg:"4",xl:"3",children:a.jsx(E,{formik:e,name:"no_telp_pemohon",placeholder:"Tulis nomor hp aktif",title:"Nomor HP",required:!0,leftIcon:a.jsx(ya,{}),type:"text"})}),a.jsx(t,{xs:"12",md:"4",lg:"4",xl:"3",children:a.jsx(E,{formik:e,name:"email_pemohon",placeholder:"Tulis alamat email aktif",title:"Email",required:!0})}),a.jsx(t,{xs:"12",md:"4",lg:"4",xl:"2",children:a.jsx(E,{formik:e,name:"rt",placeholder:"RT",title:"RT",maxLength:"3",required:!0,type:"text"})}),a.jsx(t,{xs:"12",md:"4",lg:"4",xl:"2",children:a.jsx(E,{formik:e,name:"rw",placeholder:"RW",title:"RW",maxLength:"3",required:!0,type:"text"})}),a.jsx(t,{xs:"12",md:"4",lg:"4",xl:"2",children:a.jsx(E,{formik:e,name:"kode_pos",placeholder:"Kode Pos",title:"Kode Pos",maxLength:"5",required:!0})})]}),a.jsx(b,{children:a.jsx(t,{xs:"12",md:"12",lg:"12",xl:"6",children:a.jsx(E,{formik:e,name:"alamat_pemohon",placeholder:"Tulis alamat lengkap domisili saat ini",title:"Alamat Rumah",type:"textarea",maxLength:"255",required:!0})})})]})]})},Ee=({formik:e})=>{const{statusKawin:n}=oa(o=>o.master);return a.jsxs(a.Fragment,{children:[a.jsx(aa,{title:"Informasi Pernikahan"}),a.jsxs(K,{className:"form-horizontal",children:[a.jsxs(b,{children:[a.jsx(t,{xs:"12",md:"12",lg:"12",xl:"6",children:a.jsx(T,{formik:e,name:"status_kawin",placeholder:"status perkawinan",title:"Status Perkawinan",options:n.data,required:!0})}),a.jsx(t,{xs:"12",md:"12",lg:"12",xl:"6",children:a.jsx(E,{formik:e,name:"tgl_kawin",placeholder:"Tulis tanggal pernikahan",type:"date",title:"Tanggal Pernikahan",required:!0})})]}),a.jsx(b,{children:a.jsx(E,{formik:e,name:"no_buku_nikah",placeholder:"Tulis nomor buku nikah",title:"Nomor Buku NIkah/Akta Nikah",required:!0})}),a.jsx(b,{children:a.jsx(E,{formik:e,name:"no_skim",placeholder:"Tulis nomor SKIM",title:"Nomor SKIM (Surat Keterangan Keimigrasian)",required:!0})})]})]})},Ne=({formik:e})=>a.jsxs(K,{className:"mt-3 mb-3",sx:{border:"1px solid #E7E7E7",borderRadius:5,padding:"24px"},children:[a.jsxs(b,{children:[a.jsx(t,{children:a.jsx(ve,{formik:e})}),a.jsx(t,{children:a.jsx(Ee,{formik:e})})]}),a.jsx(ta,{}),a.jsx(Fe,{formik:e}),a.jsx(ta,{})]});function Ae({formik:e}){const n=p.useRef(null),o=p.useRef(null),[u,i]=p.useState(!1);p.useEffect(()=>{const d=e.values.suratPermohonan==="1";i(d),o.current&&(o.current.checked=d)},[e.values.suratPermohonan]);const h=d=>{const r=d.target.checked,s=r?"1":"";i(r),e.setFieldValue("suratPermohonan",s),e.setFieldTouched("suratPermohonan",!0)},g=async()=>{if(n.current){const d=await Ua(n.current,{scale:2}),r=d.toDataURL("image/png"),s=new Ra("p","mm","a4"),c=s.internal.pageSize.getWidth(),l=s.internal.pageSize.getHeight(),x=c,j=d.height*c/d.width;let m=j,F=0;for(s.addImage(r,"PNG",0,F,x,j),m-=l;m>0;)F=m-l,s.addPage(),s.addImage(r,"PNG",0,F,x,j),m-=l;s.save("FormulirPernyataanPermohonan.pdf")}};return console.log(e.values),a.jsx("div",{className:"mt-5 mb-3 px-2 ",children:a.jsx(K,{sx:{border:"1px solid #E7E7E7",borderRadius:5,padding:2},children:a.jsx(ce,{children:a.jsxs(pe,{children:[a.jsx(K,{sx:{border:"1px solid #e0e0e0",borderRadius:2,mb:3,maxWidth:890,margin:"0 auto"},children:a.jsxs("div",{ref:n,style:{padding:50,fontFamily:"Times New Roman",fontSize:12,lineHeight:1.6},children:[a.jsx("div",{className:"text-center",style:{fontSize:16,fontWeight:600,letterSpacing:.5,textTransform:"uppercase",marginBottom:30},children:"Formulir Pernyataan Permohonan"}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("p",{children:"Saya yang bertanda tangan dibawah ini :"}),a.jsx("table",{style:{width:"100%",fontSize:12,marginTop:10,lineHeight:1.8},children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{style:{width:"30%"},children:"1. Nama Lengkap"}),a.jsx("td",{style:{width:"2%"},children:":"}),a.jsx("td",{children:e.values.nama_lengkap_pemohon})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"2. Tempat dan Tanggal Lahir"}),a.jsx("td",{children:":"}),a.jsxs("td",{children:[e.values.negara_lahir_pemohon_text,", ",""," ",Q(e.values.tgl_lahir_pemohon)]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"3. Alamat Tempat Tinggal"}),a.jsx("td",{children:":"}),a.jsx("td",{children:e.values.alamat_pemohon})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"4. Kewarganegaraan"}),a.jsx("td",{children:":"}),a.jsx("td",{children:e.values.kewarganegaraan_asal_pemohon_text})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"5. Adalah Isteri/Suami dari"}),a.jsx("td",{}),a.jsx("td",{})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"    Nama Lengkap"}),a.jsx("td",{children:":"}),a.jsx("td",{children:e.values.nama_pasangan})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"    Tempat dan Tanggal Lahir"}),a.jsx("td",{children:":"}),a.jsxs("td",{children:[e.values.tempat_lahir_pasangan==="Dalam Negeri"?e.values.provinsi_lahir_pasangan_text:e.values.negara_lahir_pasangan_text,","," ",Q(e.values.tgl_lahir_pasangan)," "]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"    Kewarganegaraan"}),a.jsx("td",{children:":"}),a.jsx("td",{children:e.values.kewarganegaraan_pasangan_text})]})]})})]}),a.jsx("div",{style:{marginTop:20,marginBottom:20},children:a.jsx("p",{children:"Berdasarkan kutipan akte perkawinan/buku nikah nomor 372819 tanggal 17 Mei 2017, dengan ini menyampaikan pernyataan untuk memperoleh Kewarganegaraan Republik Indonesia mengikuti suami/isteri berdasarkan Pasal 19 Undang-Undang Nomor 12 Tahun 2006. Untuk melengkapi permohonan pendaftaran ini saya lampirkan :"})}),a.jsxs("ol",{style:{listStyleType:"decimal",marginLeft:20,fontSize:12,lineHeight:1.8},children:[a.jsx("li",{children:"Fotokopi akta kelahiran Pemohon yang telah diterjemahkan ke dalam Bahasa Indonesia oleh penerjemah resmi tersumpah dan telah dilegalisasi oleh pejabat berwenang;"}),a.jsx("li",{children:"Fotokopi KITAP (Kartu Izin Tinggal Tetap) pemohon yang masih berlaku dan telah dilegalisasi."}),a.jsx("li",{children:"Fotokopi akta kelahiran suami atau isteri Pemohon yang telah dilegalisasi oleh pejabat yang berwenang;"}),a.jsx("li",{children:"Fotokopi kartu tanda penduduk suami atau isteri Pemohon yang telah dilegalisasi oleh pejabat yang berwenang;"}),a.jsx("li",{children:"Fotokopi akta perkawinan/buku nikah Pemohon dari suami atau isteri yang telah diterjemahkan ke dalam Bahasa Indonesia oleh penerjemah resmi tersumpah dan dilegalisasi oleh pejabat berwenang;"}),a.jsx("li",{children:"Asli surat keterangan dari kantor imigrasi di tempat tinggal Pemohon yang menerangkan bahwa Pemohon telah bertempat tinggal di Indonesia paling singkat 5 (lima) tahun berturut-turut atau paling singkat 10 (sepuluh) tahun tidak berturut-turut;"}),a.jsx("li",{children:"Asli surat keterangan catatan kepolisian yang dikeluarkan oleh Markas Besar Kepolisian Negara Republik Indonesia yang masih berlaku;"}),a.jsx("li",{children:"Asli surat keterangan dari perwakilan negara Pemohon yang menerangkan jika Pemohon memperoleh Kewarganegaraan Republik Indonesia maka yang bersangkutan kehilangan kewarganegaraannya;"}),a.jsx("li",{children:"Pas foto Pemohon terbaru berwarna ukuran 4 x 6 cm dengan latar belakang warna merah, berpakaian rapi dan sopan;"}),a.jsx("li",{children:"Asli bukti pembayaran permohonan pernyataan untuk menjadi Warga Negara Indonesia;"}),a.jsx("li",{children:"Asli surat keterangan sehat jasmani dan rohani dari rumah sakit pemerintah;"}),a.jsx("li",{children:"Asli Permohonan secara tertulis dalam bahasa Indonesia di tandatangani diatas kertas bermaterai yang ditujukan kepada Menteri Hukum dan HAM melalui Ditjen AHU;"}),a.jsx("li",{children:"Asli Surat pernyataan alasan pemohon untuk menjadi WNI yang ditulis tangan sendiri di tandatangani dan bermaterai;"}),a.jsx("li",{children:"Asli Surat pernyataan dapat berbahasa Indonesia yang ditulis tangan sendiri di tandatangani dan bermaterai;"}),a.jsx("li",{children:"Asli Surat pernyataan menerangkan nama lengkap pemohon yang akan dipakai dalam Surat Keputusan ditulis tangan sendiri di tandatangani dan bermaterai;"}),a.jsx("li",{children:"Asli Surat pernyataan tertulis bahwa pemohon akan setia kepada negara kesatuan RI, Pancasila, Undang-Undang Dasar Negara RI tahun 1945 dan akan membelanya dengan sungguh-sungguh serta menjalankan kewajiban untuk menjadi WNI dengan tulus dan ikhlas ditulis tangan sendiri di tandatangani dan bermaterai."})]}),a.jsx("div",{style:{marginTop:50,display:"flex",justifyContent:"flex-end"},children:a.jsxs("div",{children:[a.jsxs("div",{style:{textAlign:"right"},children:[e.values.kab_kota_pemohon_text,","," ",Q(new Date)]}),a.jsx("div",{style:{textAlign:"center"},children:"Yang menyatakan"}),a.jsx("div",{style:{height:40}}),a.jsx("div",{style:{textAlign:"center"},children:"materai"}),a.jsx("div",{style:{height:40}}),a.jsx("div",{style:{textAlign:"center",fontSize:12,fontWeight:"bold"},children:e.values.nama_lengkap_pemohon})]})})]})}),a.jsxs(K,{sx:{borderRadius:2,mb:3,maxWidth:890,margin:"0 auto"},xs:"12",className:"d-flex flex-row gap-2 px-4 justify-content-between",style:{marginBottom:"32px",marginTop:"32px"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsxs("label",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer",fontSize:"0.95rem",lineHeight:"1.5",padding:"8px",border:u?"2px solid #28a745":e.errors.suratPermohonan&&e.touched.suratPermohonan?"2px solid #dc3545":"",borderRadius:"8px",backgroundColor:u?"#d4edda":e.errors.suratPermohonan&&e.touched.suratPermohonan?"#f8d7da":"white",transition:"all 0.3s"},children:[a.jsx("input",{ref:o,type:"checkbox",onChange:h,style:{marginRight:"12px",marginTop:"4px",transform:"scale(1.3)",cursor:"pointer"}}),a.jsx("span",{children:"Pastikan pengisian data yang telah anda isi sudah benar dan lengkap"})]}),e.errors.suratPermohonan&&e.touched.suratPermohonan&&a.jsxs("div",{style:{color:"#dc3545",fontSize:"12px",marginTop:"8px",marginLeft:"",fontWeight:"500"},children:["⚠️ ",e.errors.suratPermohonan]})]}),a.jsx(M,{text:"Download",leftIcon:a.jsx(Ba,{}),textColor:"#041662",bgColor:"transparent",border:"1px solid #E7E7E7",onClick:g,sx:{height:"45px"}})]})]})})})})}const C=({formik:e,name:n,label:o,acceptedFileTypes:u=["application/pdf"],maxFileSizeMB:i=1,required:h=!1,uploadFnc:g,delFnc:d,documentUrl:r,loadingUpload:s,...c})=>{const l=p.useRef(null),[x,j]=p.useState(null),[m,F]=p.useState(!1),[_,f]=p.useState(null),[S,k]=p.useState(null);p.useEffect(()=>{const y=e.values[n];r?(k(r),f({url:r,uploaded:!0}),j(null)):y instanceof File?(j(y.name),k(null),f(null)):y&&typeof y=="object"?(f(y),j(null)):y&&typeof y=="string"?(k(y),f({url:y,uploaded:!0}),j(null)):(j(null),k(null),f(null))},[e.values[n],r,n]);const v=y=>{const N=y.currentTarget.files[0];if(e.setFieldTouched(n,!0),N){const L=i*1024*1024;if(console.log("File validation:",{fileName:N.name,fileType:N.type,fileSize:N.size,maxSizeBytes:L,acceptedTypes:u}),!u.includes(N.type)){const V=`Tipe file tidak valid. Harap unggah ${u.map(da=>da.split("/")[1].toUpperCase()).join(", ")}.`;console.log("❌ File type validation failed:",V),e.setFieldError(n,V),e.setFieldValue(n,null),j(null),H(V);return}if(N.size>L){const V=`Ukuran file tidak boleh lebih dari ${i}MB.`;console.log("❌ File size validation failed:",V),e.setFieldError(n,V),e.setFieldValue(n,null),j(null),H(V);return}console.log("✅ File validation passed, setting file to formik"),e.setFieldValue(n,N),j(N.name),e.setFieldError(n,void 0),console.log("File set successfully")}else console.log("No file selected, clearing state"),e.setFieldValue(n,null),j(null),e.setFieldError(n,void 0)},W=()=>{console.log(`=== Reset File State [${n}] ===`),j(null),f(null),k(null),e.setFieldValue(n,null),e.setFieldError(n,void 0),l.current&&(l.current.value="")},G=async y=>{y.stopPropagation(),console.log(`=== Handle Upload [${n}] ===`),console.log("currentFile:",x),console.log("formik.values[name]:",e.values[n]);const N=e.values[n];if(!N||!(N instanceof File)){console.log("❌ No valid file to upload"),H("Tidak ada file yang valid untuk diunggah");return}if(!g){console.log("❌ No upload function provided"),H("Fungsi upload tidak tersedia");return}try{F(!0),console.log("🚀 Starting upload for file:",N.name);const L=await g(N,n);if(console.log("✅ Upload response:",L),L)f(L),j(null),e.setFieldValue(n,L),e.setFieldError(n,void 0),sa("File berhasil diunggah"),console.log("✅ Upload completed successfully");else throw new Error("Invalid response format")}catch(L){console.error("❌ Upload error:",L),H(L.message||"Gagal mengunggah file")}finally{F(!1)}},R=y=>{if(y.stopPropagation(),!S){H("Dokumen tidak tersedia");return}window.open(S,"_blank")},O=()=>{var y;m||(y=l.current)==null||y.click()},B=!!x,q=!!_,Y=B&&!m,X=!!S,$=e.touched[n]&&!!e.errors[n],U=()=>q&&_.original_name?`${_.original_name}`:B?x:"Unggah dokumen dengan klik untuk memilih file",z=()=>q?"#1F7C4D":B?"#041662":"#B0B0B0";return a.jsxs("div",{className:"mb-3",children:[a.jsxs(La,{style:{fontSize:"12px",fontWeight:500},htmlFor:n,children:[o," ",h&&a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("div",{className:"d-flex align-items-center",children:a.jsxs(K,{sx:{border:$?"1px solid #dc3545":"1px solid #E7E7E7",borderRadius:2,width:"100%",backgroundColor:q?"#f8f9fa":"white"},children:[a.jsx(Ma,{id:n,name:n,type:"file",className:"form-control",onChange:v,onBlur:()=>e.setFieldTouched(n,!0),innerRef:l,style:{display:"none"},invalid:$,accept:u.join(","),...c}),a.jsxs("div",{onClick:O,role:"button",tabIndex:0,onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&(y.preventDefault(),O())},style:{minWidth:"100%",cursor:m?"not-allowed":"pointer",opacity:m?.7:1},className:"d-flex align-items-center justify-content-between p-2",children:[a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx(ia,{style:{backgroundColor:q?"#1F7C4D":"#041662",pointerEvents:"none",border:"none"},className:"me-2 py-1 px-2",size:"sm",children:s?a.jsx(Va,{className:"animate spin"}):a.jsx(za,{size:16})}),s?a.jsx("span",{style:{fontSize:"12px",lineHeight:"22px",fontWeight:q?"500":"400"},children:"Mengunggah file, mohon tunggu..."}):a.jsx("span",{style:{color:z(),fontSize:"12px",lineHeight:"22px",fontWeight:q?"500":"400"},children:U()})]}),a.jsxs("div",{className:"d-flex align-items-center",children:[X&&a.jsx(ia,{style:{backgroundColor:"#1F7C4D",border:"none"},className:"me-1 py-1 px-2",size:"sm",onClick:R,disabled:m,title:"Lihat dokumen",children:a.jsx(Ha,{size:14})}),Y&&a.jsx(ia,{style:{backgroundColor:"#28a745",border:"none"},className:"me-1 py-1 px-2",size:"sm",onClick:G,disabled:m,title:"Upload file",children:m?"...":a.jsx(Wa,{size:16})}),B&&!q&&a.jsx(ia,{style:{backgroundColor:"#6c757d",border:"none"},className:"py-1 px-2",size:"sm",onClick:y=>{y.stopPropagation(),W()},disabled:m,title:"Batal pilih file",children:a.jsx(Oa,{size:16})})]})]})]})}),a.jsxs("span",{style:{fontSize:"10px",fontWeight:400,lineHeight:"16px",color:"#6D6D6D"},children:["* File berformat"," ",u.map(y=>y.split("/")[1].toUpperCase()).join(" atau ")," ","dan tidak lebih dari ",i,"MB"]}),$&&a.jsx($a,{type:"invalid",className:"d-block",style:{fontSize:"10px"},children:e.errors[n]})]})},D=(e,n)=>{var u;if(!e||!Array.isArray(e)||e.length===0)return null;const o=e.filter(i=>i.file_type===n).sort((i,h)=>new Date(h.uploaded_at)-new Date(i.uploaded_at));return o.length===0?null:((u=o[0])==null?void 0:u.url)||null},A={fotokopiAktaKelahiran:1,fotokopiKitap:2,fotokopiAktaKelahiranPasangan:3,fotokopiKtpPasangan:4,fotokopiAktaPerkawinan:5,suratKeteranganImigrasi:6,sckcAsli:7,suratPerwakilanNegara:8,pasfoto:9,suratKeteranganSehat:10,buktiPembayaran:11,suratPermohonanTertulis:12,suratPernyataanAlasan:13,suratPernyataanBerbahasa:14,suratPernyataanNama:15,suratPernyataanKesetiaan:16},Te=Object.fromEntries(Object.entries(A).map(([e,n])=>[n,e])),Ke=({formik:e})=>{const[n,o]=p.useState({}),u=ga();console.log("Unggah dokumen",e.values);const i=e.values.files||[];p.useEffect(()=>{i.forEach(d=>{const r=Te[d.file_type];if(r){const s=e.values[r];(!s||s!==d)&&(console.log(`✅ Updating ${r} with file data`),e.setFieldValue(r,d))}else console.warn(`❌ No field mapping found for file_type: ${d.file_type}`)}),console.log("=== END SYNC FILES ===")},[i,e]);const g={uploadFnc:async(d,r)=>{var c;if(!u){const l="ID Permohonan tidak ditemukan. Silakan simpan draft terlebih dahulu.";throw H(l),new Error(l)}const s=A[r];if(!s){const l=`Tipe dokumen tidak valid untuk field: ${r}`;throw H(l),new Error(l)}if(!d){const l="File tidak valid";throw H(l),new Error(l)}try{o(j=>({...j,[r]:!0}));const l=new FormData;l.append("file",d),l.append("id_permohonan",u),l.append("file_type",s),console.log(`🚀 Uploading file: ${d.name} for field: ${r} (type: ${s})`);const x=await Ja(l);if(console.log("✅ Upload response:",x),console.log("✅ Upload response data:",x.data),x.message==="Success"&&x.data){const j=x.data;console.log("📝 Updating formik with uploaded file data:",j);const m=[...i.filter(F=>F.file_type!==s),j];return e.setFieldValue("files",m),e.setFieldValue(r,j),e.setFieldError(r,void 0),console.log("✅ Successfully updated formik:",{fieldName:r,uploadedFileData:j,updatedFilesCount:m.length}),sa(`Dokumen ${r} berhasil diunggah`),j}else throw new Error(((c=x.data)==null?void 0:c.message)||"Upload response format tidak valid")}catch(l){console.error("❌ Upload error:",l);let x="Gagal mengunggah dokumen";if(l.code==="ECONNABORTED")x="Upload timeout. Periksa koneksi internet dan coba lagi.";else if(l.response){const j=l.response.status,m=l.response.data;switch(j){case 400:x=(m==null?void 0:m.message)||"Request tidak valid";break;case 401:x="Unauthorized. Silakan login ulang.";break;case 413:x="File terlalu besar";break;case 415:x="Tipe file tidak didukung";break;case 500:x="Server error. Silakan coba lagi nanti.";break;default:x=(m==null?void 0:m.message)||`Server error: ${j}`}}else l.request&&(x="Gagal terhubung ke server. Periksa koneksi internet.");throw ra(x),new Error(x)}finally{o(l=>({...l,[r]:!1}))}}};return a.jsxs(K,{className:"mt-3 mb-3",sx:{border:"1px solid #E7E7E7",borderRadius:5,padding:"24px"},children:[a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"fotokopiAktaKelahiran",label:"1. Fotokopi akta kelahiran pemohon yang sudah diterjemahkan ke Bahasa Indonesia oleh penerjemah resmi dan dilegalisasi.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.fotokopiAktaKelahiran),required:!0,loadingUpload:n.fotokopiAktaKelahiran,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"fotokopiKitap",label:"2. Unggah fotokopi KITAP (Kartu Izin Tinggal Tetap) pemohon yang masih berlaku dan telah dilegalisasi.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.fotokopiKitap),required:!0,loadingUpload:n.fotokopiKitap,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"fotokopiAktaKelahiranPasangan",label:"3. Fotokopi akta kelahiran pasangan (suami/istri) yang sudah dilegalisasi.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.fotokopiAktaKelahiranPasangan),required:!0,loadingUpload:n.fotokopiAktaKelahiranPasangan,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"fotokopiKtpPasangan",label:"4. Fotokopi KTP pasangan (suami/istri) yang sudah dilegalisasi.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.fotokopiKtpPasangan),required:!0,loadingUpload:n.fotokopiKtpPasangan,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"fotokopiAktaPerkawinan",label:"5. Fotokopi akta perkawinan/buku nikah yang diterjemahkan ke Bahasa Indonesia dan dilegalisasi.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.fotokopiAktaPerkawinan),required:!0,loadingUpload:n.fotokopiAktaPerkawinan,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"suratKeteranganImigrasi",label:"6. Asli surat keterangan dari Imigrasi yang menyatakan pemohon sudah tinggal di Indonesia minimal 5 tahun berturut-turut atau 10 tahun tidak berturut-turut.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.suratKeteranganImigrasi),required:!0,loadingUpload:n.suratKeteranganImigrasi,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"sckcAsli",label:"7. Asli SKCK dari Mabes Polri yang masih berlaku.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.sckcAsli),required:!0,loadingUpload:n.sckcAsli,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"suratPerwakilanNegara",label:"8. Asli surat dari perwakilan negara asal yang menyatakan pemohon akan kehilangan kewarganegaraan lamanya jika menjadi WNI.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.suratPerwakilanNegara),required:!0,loadingUpload:n.suratPerwakilanNegara,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"pasfoto",label:"9. Pas foto terbaru ukuran 4x6 cm, berwarna, latar belakang merah, berpakaian rapi dan sopan.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.pasfoto),required:!0,loadingUpload:n.pasfoto,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"suratKeteranganSehat",label:"10. Asli surat keterangan sehat jasmani dan rohani dari rumah sakit pemerintah.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.suratKeteranganSehat),required:!0,loadingUpload:n.suratKeteranganSehat,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"buktiPembayaran",label:"11. Asli bukti pembayaran permohonan untuk menjadi WNI.",acceptedFileTypes:["application/pdf"],documentUrl:D(i,A.buktiPembayaran),maxFileSizeMB:20,required:!0,loadingUpload:n.buktiPembayaran,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"suratPermohonanTertulis",label:"12. Asli surat permohonan tertulis dalam Bahasa Indonesia, ditandatangani dan bermaterai, ditujukan ke Menteri Hukum melalui Ditjen AHU.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.suratPermohonanTertulis),required:!0,loadingUpload:n.suratPermohonanTertulis,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"suratPernyataanAlasan",label:"13. Asli surat pernyataan alasan menjadi WNI, ditulis tangan, ditandatangani, dan bermaterai.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.suratPernyataanAlasan),required:!0,loadingUpload:n.suratPernyataanAlasan,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"suratPernyataanBerbahasa",label:"14. Asli surat pernyataan bisa berbahasa Indonesia, ditulis tangan, ditandatangani, dan bermaterai.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.suratPernyataanBerbahasa),required:!0,loadingUpload:n.suratPernyataanBerbahasa,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"suratPernyataanNama",label:"15. Asli surat pernyataan nama lengkap yang akan digunakan dalam SK, ditulis tangan, ditandatangani, dan bermaterai.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.suratPernyataanNama),required:!0,loadingUpload:n.suratPernyataanNama,...g})}),a.jsx(t,{lg:"12",xl:"12",children:a.jsx(C,{formik:e,name:"suratPernyataanKesetiaan",label:"16. Asli surat pernyataan kesetiaan pada NKRI, Pancasila, UUD 1945, dan kesediaan menjalankan kewajiban sebagai WNI secara tulus, ditulis tangan, ditandatangani, dan bermaterai.",acceptedFileTypes:["application/pdf"],maxFileSizeMB:20,documentUrl:D(i,A.suratPernyataanKesetiaan),required:!0,loadingUpload:n.suratPernyataanKesetiaan,...g})})]})},Ie=({formik:e})=>{const{values:n,setFieldValue:o,touched:u,errors:i}=e,h=n.tempat_lahir_pasangan==="Dalam Negeri",g=n.tempat_lahir_pasangan==="Luar Negeri",d=p.useRef(),{agama:r,negara:s,provinsi:c,kotakabPsgn:l,pekerjaan:x}=oa(j=>j.master);return p.useEffect(()=>{d.current!==n.tempat_lahir_pasangan&&(n.tempat_lahir_pasangan==="Dalam Negeri"?o("id_negara_lahir_pasangan",""):n.tempat_lahir_pasangan==="Luar Negeri"&&(o("id_provinsi_lahir_pasangan",""),o("id_kab_kota_lahir_pasangan","")),d.current=n.tempat_lahir_pasangan)},[n.tempat_lahir_pasangan,o,i,u,e]),p.useEffect(()=>{n.id_kewarganegaraan_pasangan||o("id_kewarganegaraan_pasangan",76)},[o,n.id_kewarganegaraan_pasangan]),a.jsxs(a.Fragment,{children:[a.jsx(aa,{title:"Informasi Pasangan"}),a.jsxs(K,{className:"form-horizontal",children:[a.jsxs(b,{children:[a.jsx(t,{xs:"12",md:"6",xl:"3",children:a.jsx(E,{formik:e,name:"nama_pasangan",placeholder:"Tulis nama lengkap",title:"Nama Lengkap",required:!0})}),a.jsx(t,{xs:"12",md:"6",xl:"3",children:a.jsx(E,{formik:e,name:"nik_pasangan",placeholder:"Tulis NIK pasangan",title:"NIK",required:!0})}),a.jsx(t,{xs:"12",md:"6",xl:"3",children:a.jsx(T,{formik:e,name:"jenis_kelamin_pasangan",placeholder:"Pilih jenis kelamin",options:pa.genderOption,title:"Jenis Kelamin",required:!0})}),a.jsx(t,{xs:"12",md:"6",xl:"3",children:a.jsx(T,{formik:e,name:"agama_pasangan",placeholder:"agama sesuai identitas",options:r.data,title:"Agama",required:!0})})]}),a.jsxs(b,{children:[a.jsx(t,{xs:"12",md:"6",xl:"3",children:a.jsx(E,{formik:e,name:"tgl_lahir_pasangan",type:"date",placeholder:"Tanggal Lahir",title:"Tanggal Lahir",required:!0})}),a.jsx(t,{xs:"12",md:"6",xl:"3",children:a.jsx(E,{formik:e,name:"id_kewarganegaraan_pasangan",placeholder:"Pilih kewarganegaraan",value:"Indonesia",title:"Kewarganegaraan Asal",readonly:!0})}),a.jsx(t,{xs:"12",md:"6",xl:"3",children:a.jsx(E,{formik:e,name:"no_telp_pasangan",title:"Nomor HP",type:"number",leftIcon:a.jsx(ya,{}),placeholder:"Tulis nomor handphone aktif",required:!0})}),a.jsx(t,{xs:"12",md:"6",xl:"3",children:a.jsx(E,{formik:e,name:"email_pasangan",title:"Email",placeholder:"Tulis alamat email aktif",required:!0})})]}),a.jsxs(b,{children:[a.jsx(t,{xs:"12",md:"6",xl:"3",children:a.jsx(T,{formik:e,name:"tempat_lahir_pasangan",placeholder:"Tulis tempat lahir",options:pa.bornOption,title:"Tempat Lahir",required:!0})}),a.jsx(t,{xs:"12",md:"6",xl:"3",children:a.jsx(T,{formik:e,name:"id_pekerjaan_pasangan",placeholder:"Tulis pekerjaan",options:x.data,title:"Pekerjaan",required:!0})}),a.jsx(t,{xs:"12",md:"6",xl:"3",children:a.jsx(T,{formik:e,name:"id_provinsi_lahir_pasangan",placeholder:"Tulis provinsi",options:c.data,title:"Provinsi",required:h,isDisabled:g})}),a.jsx(t,{xs:"12",md:"6",xl:"3",children:a.jsx(T,{formik:e,name:"id_kab_kota_lahir_pasangan",placeholder:"Tulis kabupaten/kota",options:l.data,title:"Kab/Kota",required:h,isDisabled:g||!n.id_provinsi_lahir_pasangan})}),a.jsx(t,{xs:"12",md:"6",xl:"3",children:a.jsx(T,{formik:e,name:"id_negara_lahir_pasangan",placeholder:"Tulis negara domisili",options:s.data,title:"Negara",required:!0,isDisabled:h})})]})]})]})},Ce=({formik:e})=>a.jsxs(K,{className:"mt-3 mb-3",sx:{border:"1px solid #E7E7E7",borderRadius:5,padding:"24px"},children:[a.jsx(Ie,{formik:e}),a.jsx(ta,{})]}),ba={voucher:"11112233",nama_lengkap_pemohon:"",id_kewarganegaraan_asal_pemohon:"",id_negara_lahir_pemohon:"",tgl_lahir_pemohon:"",jenis_kelamin_pemohon:"",agama_pemohon:"",id_pekerjaan_pemohon:"",status_kawin:"",tgl_kawin:"",no_buku_nikah:"",no_skim:"",id_provinsi_pemohon:"",id_kab_kota_pemohon:"",id_kec_pemohon:"",id_desa_kel_pemohon:"",no_telp_pemohon:"",email_pemohon:"",rt:"",rw:"",kode_pos:"",alamat_pemohon:"",nama_pasangan:"",nik_pasangan:"",no_telp_pasangan:"",email_pasangan:"",id_provinsi_lahir_pasangan:"",id_kab_kota_lahir_pasangan:"",id_negara_lahir_pasangan:"",tgl_lahir_pasangan:"",id_pekerjaan_pasangan:"",id_kewarganegaraan_pasangan:76,jenis_kelamin_pasangan:"",agama_pasangan:"",suratPermohonan:"",fotokopiAktaKelahiran:null,fotokopiKtp:null,fotokopiAktaKelahiranPasangan:null,fotokopiKtpPasangan:null,fotokopiAktaPerkawinan:null,suratKeteranganImigrasi:null,sckcAsli:null,suratPerwakilanNegara:null,pasfoto:null,suratKeteranganSehat:null,buktiPembayaran:null,suratPermohonanTertulis:null,suratPernyataanAlasan:null,suratPernyataanBerbahasa:null,suratPernyataanNama:null,suratPernyataanKesetiaan:null};function De(e,n,o=!0){const[u,i]=p.useState(!1),[h,g]=p.useState(null),[d,r]=p.useState(null),s=n===3||n===1;return p.useEffect(()=>{if(!o||!e||!s)return;(async()=>{console.log("API RUN"),i(!0),g(null);try{const l=await Ga(e);r(l.data)}catch(l){g(l)}finally{i(!1)}})()},[e,o,n]),{data:d,loading:u,error:h}}const qe=()=>{const[e,n]=p.useState(!1),[o,u]=p.useState(null),[i,h]=p.useState(null);return{postPermohonan:async d=>{var r;console.log("🚀 usePostPermohonan - Starting POST request"),console.log("Data to post:",d),n(!0),u(null),h(null);try{const s={id_voucher:Pa(),...d};console.log(s);const c=await Ya(s);console.log("✅ POST API Response:",c),console.log("Response status:",c.status),console.log("Response data:",c.data);let l;return c.message==="Success"&&(l=c,localStorage.setItem("id_permohonan_pewarganegaraan",JSON.stringify(c.data.id_permohonan))),console.log("✅ Processed response:",l),h(l),l}catch(s){console.error("❌ POST Permohonan Error:",s);let c={message:"Network error",status:null,data:null};s.response?(console.error("API Error Response:",s.response),c={message:((r=s.response.data)==null?void 0:r.message)||`HTTP ${s.response.status}`,status:s.response.status,data:s.response.data}):s.request?(console.error("Network Error:",s.request),c={message:"Network connection failed",status:null,data:null}):(console.error("Unexpected Error:",s.message),c={message:s.message,status:null,data:null}),u(c);const l=new Error(c.message);throw l.response=s.response,l.request=s.request,l.status=c.status,l}finally{n(!1),console.log("🏁 usePostPermohonan - Request completed")}},loading:e,error:o,response:i}},Be=()=>{const e=p.useCallback(async(o,u)=>{const i=la[o],h=na[o],g=ca(u.values,h);if(o===4&&(console.log("=== DEBUG STEP 4 VALIDATION ==="),console.log("Current step values:",g),console.log("All formik values:",u.values),h.forEach(r=>{const s=u.values[r];console.log(`${r}:`,{value:s,type:typeof s,isFile:s instanceof File,isObject:s&&typeof s=="object",hasId:s&&s.id,hasUrl:s&&s.url,hasFilePath:s&&s.file_path})})),!i)return{isValid:!0,errors:{}};const d={...u.touched};h.forEach(r=>{d[r]=!0}),u.setTouched(d);try{const r=h.reduce((c,l)=>(c[l]=u.values[l],c),{});await i.validate(r,{abortEarly:!1});const s={...u.errors};return h.forEach(c=>{delete s[c]}),u.setErrors(s),{isValid:!0,errors:{},step:o,data:g}}catch(r){console.log("Validation error for step",o,":",r);const s={};return r.inner&&r.inner.forEach(c=>{s[c.path]=c.message}),u.setErrors({...u.errors,...s}),{isValid:!1,errors:s,data:{}}}},[]),n=p.useCallback(async o=>{const u={};let i=!1;for(let h=0;h<na.length;h++){const g=la[h],d=na[h];if(g)try{const r=d.reduce((s,c)=>(s[c]=o.values[c],s),{});await g.validate(r,{abortEarly:!1})}catch(r){i=!0;const s={};r.inner&&r.inner.forEach(c=>{s[c.path]=c.message}),u[h]=s}}return{hasErrors:i,allStepErrors:u}},[]);return{validateCurrentStep:e,validateAllSteps:n}},Ue=(e,n,o,u)=>{const i=new ha,h=p.useCallback(async r=>{if(await i.customConfirmation("Apakah anda yakin akan menyimpan data ke draft?")){const c=u(r);console.log("Draft values for current step (processed):",c),console.log(e);try{let l;return e?(l=await o(c),l.message==="Success"&&sa("Berhasil memperbarui draft")):(l=await n(c),l.message==="Success"&&sa("Berhasil menyimpan ke draft")),l}catch(l){throw console.error("Error saving draft:",l),i.customWarningMsg("Gagal menyimpan draft. "),l}finally{}}return null},[e,n,o,u,i]),g=p.useCallback((r,s)=>{if(!r||!r.fields)return J({});const c={};return Object.keys(s).forEach(l=>{const x=s[l];x!==""&&x!==null&&x!==void 0&&r.fields[l]&&(c[l]=r.fields[l])}),J(c)},[]),d=p.useCallback(async(r,s,c)=>{const l=na[r],x=la[r];let j=!1;const m=ca(s.values,l),F=l.reduce((_,f)=>(_[f]=s.values[f],_),{});if(Object.keys(ca(F,l)).length===0){i.customWarningMsg("Tidak ada data yang perlu disimpan pada langkah ini. Harap isi form jika ingin menyimpan ke draft.");return}try{if(x){const S=g(x,m);console.log("SELECTIVE SCHEMA",S),await S.validate(m,{abortEarly:!1})}const _={...s.errors};l.forEach(S=>{delete _[S]}),s.setErrors(_),c(S=>{const k={...S};return k[r]&&(l.forEach(v=>delete k[r][v]),Object.keys(k[r]).length===0&&delete k[r]),k}),console.log("EXECUTE TRY SAVEDRAFT");const f=await h(m);f?console.log("✅ Draft saved successfully:",f):console.log("ℹ️ User cancelled draft save")}catch(_){const f={};_.inner&&_.inner.forEach(S=>{l.includes(S.path)&&F[S.path]!==void 0&&F[S.path]!==null&&F[S.path]!==""&&(f[S.path]=S.message,j=!0)}),j&&(s.setErrors({...s.errors,...f}),c(S=>({...S,[r]:f})),i.customWarningMsg("Beberapa input yang diisi memiliki format yang tidak valid. Mohon periksa kembali."))}},[h,i]);return{saveDraft:h,handleDraft:d}},Re=(e,n,o,u)=>{const i=new ha,h=p.useCallback(async(d,r,s,c,l,x,j)=>{const m=await x(d,j),F=na[d];if(!m.isValid){console.log("validation current step",m),i.customWarningMsg("harap melengkapi formulir sebelum ke langkah selanjutnya.");return}s(k=>{const v={...k};return delete v[d],v}),c(k=>new Set([...k,d]));const _=d===3,f=d===4;if(_){console.log("📝 Step 3 (Surat Permohonan): Skipping API call, moving to next step"),r(k=>k+1),l(k=>{const v=new Set(k);return v.delete(d),v});return}if(f){console.log("📎 Step 4 (Upload): skipping API call, moving next step"),r(k=>k+1),l(k=>{const v=new Set(k);return v.delete(d),v});return}if(f){console.log("📎 Step 5 (Pratinjau): Final step, preparing for submission"),r(k=>k+1),l(k=>{const v=new Set(k);return v.delete(d),v});return}const S=F.reduce((k,v)=>(k[v]=j.values[v],k),{});try{const k=u(S);let v;e?(console.log("Process data to API PATCH ===>>>",k),v=await o(k,e)):(console.log("Process data to API POST ===>>>",k),v=await n(k)),r(W=>W+1),l(W=>{const G=new Set(W);return G.delete(d),G})}catch(k){console.error("API Error:",k),i.customWarningMsg("Gagal menyimpan data. Silakan coba lagi.")}},[e,n,o,u,i]),g=p.useCallback(async(d,r,s)=>{d===1?await i.customConfirmation("Keluar pada formulir akan menghapus semua riwayat pengisian, harap simpan di draft jika akan melanjutkan nanti")&&s():r(c=>c-1)},[i]);return{handleNext:h,handleBack:g}},Le="Dalam Negeri",Me="Luar Negeri",ze=(e,n)=>{const[o,u]=p.useState(n?1:0),[i,h]=p.useState(new Set),[g,d]=p.useState({}),[r,s]=p.useState(new Set),[c,l]=p.useState(!1),{loading:x,error:j,data:m}=De(n,o),{postPermohonan:F,response:_,loading:f,error:S}=qe(),{patchPermohonan:k,response:v,loading:W,error:G}=je(),R=n;console.log("Get Data permohonan ===>",m);const O=p.useMemo(()=>m&&m.id_permohonan===R?{...ba,...m}:ba,[m,R]),B=p.useCallback(ea=>{const Z={...ea};return Z.tempat_lahir_pasangan===Le?delete Z.id_negara_lahir_pasangan:Z.tempat_lahir_pasangan===Me&&(delete Z.id_provinsi_lahir_pasangan,delete Z.id_kab_kota_lahir_pasangan),Z},[]),{validateCurrentStep:q,validateAllSteps:Y}=Be(),{handleDraft:X}=Ue(R,F,k,B),{handleNext:$,handleBack:U}=Re(R,F,k,B),{handleSubmit:z}=ke(R,k,B),y=_a({enableReinitialize:!0,validateOnChange:!0,validateOnBlur:!0,initialValues:O,validationSchema:la[o],onSubmit:async ea=>{console.log("Formik onSubmit called with:",ea)}});p.useEffect(()=>{N()},[e]);const N=p.useCallback(()=>{u(n?1:0),y.resetForm(),d({}),s(new Set),h(new Set)},[y,n]),L=p.useCallback(ea=>i.has(ea),[i]),V=p.useCallback(()=>$(o,u,d,s,h,q,y),[o,$,q,y]),da=p.useCallback(()=>U(o,u,N),[o,U,N]),wa=p.useCallback(()=>X(o,y,d),[o,y,X]),Sa=p.useCallback(()=>z(o,y,Y,d,l),[o,y,z,Y]);return{activeStep:o,setActiveStep:u,skipped:i,stepErrors:g,completedSteps:r,isSubmitting:c,formik:y,isStepSkipped:L,handleNext:V,handleBack:da,handleDraft:wa,handleSubmit:Sa,resetForm:N,dataPermohonan:m,loadingGet:x,postLoading:f,patchLoading:W,processPayloadBasedOnTempatLahir:B}},Ve=()=>a.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:a.jsx("i",{className:"bx bx-loader-circle spin fs-1"})}),He=Ve,P=(e,n)=>a.jsxs(b,{className:"mb-2",children:[a.jsx(t,{xs:"4",md:"4",lg:"5",children:a.jsx(xa,{variant:"body2",fontWeight:"bold",children:e})}),a.jsx(t,{xs:"8",md:"8",lg:"7",children:a.jsxs(xa,{variant:"body2",children:[": ",n||"-"]})})]}),We=({formik:e})=>{const{values:n}=e;return a.jsxs(a.Fragment,{children:[a.jsx(aa,{title:"Informasi Pasangan",buttonText:"Ubah"}),a.jsxs(K,{className:"form-horizontal border border-1 rounded-4 px-4 py-3",children:[a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Nama Lengkap",n.nama_pasangan)}),a.jsx(t,{md:"6",children:P("NIK",n.nik_pasangan)})]}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Jenis Kelamin",n.jenis_kelamin_pasangan)}),a.jsx(t,{md:"6",children:P("Agama",n.agama_pasangan)})]}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Tanggal Lahir",Q(n.tgl_lahir_pasangan))}),a.jsx(t,{md:"6",children:P("Kewarganegaraan",n.kewarganegaraan_pasangan_text)})]}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Nomor HP",n.no_telp_pasangan)}),a.jsx(t,{md:"6",children:P("Email",n.email_pasangan)})]}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Tempat Lahir",n.tempat_lahir_pasangan)}),a.jsx(t,{md:"6",children:P("Pekerjaan",n.pekerjaan_pasangan_text)})]}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Provinsi Lahir",n.provinsi_lahir_pasangan_text)}),a.jsx(t,{md:"6",children:P("Kab/Kota Lahir",n.kab_kota_lahir_pasangan_text)})]}),a.jsx(b,{children:a.jsx(t,{md:"6",children:P("Negara Lahir",n.negara_lahir_pasangan_text)})})]})]})},Oe=({formik:e})=>{const{values:n}=e;return a.jsxs(a.Fragment,{children:[a.jsx(aa,{title:"Informasi Pemohon",buttonText:"Ubah"}),a.jsxs(K,{className:"form-horizontal border border-1 rounded-4 px-4 py-3",children:[a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Nama Lengkap",n.nama_lengkap_pemohon)}),a.jsx(t,{md:"6",children:P("Kewarganegaraan",n.kewarganegaraan_asal_pemohon_text)})]}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Tempat Lahir",n.negara_lahir_pemohon_text)}),a.jsx(t,{md:"6",children:P("Tanggal Lahir",Q(n.tgl_lahir_pemohon))})]}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Jenis Kelamin",n.jenis_kelamin_pemohon)}),a.jsx(t,{md:"6",children:P("Agama",n.agama_pemohon)})]}),a.jsx(b,{children:a.jsx(t,{md:"6",children:P("Pekerjaan",n.pekerjaan_pemohon_text)})}),a.jsx(ta,{}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Provinsi",n.provinsi_pemohon_text)}),a.jsx(t,{md:"6",children:P("Kabupaten/Kota",n.kab_kota_pemohon_text)})]}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Kecamatan",n.kec_pemohon_text)}),a.jsx(t,{md:"6",children:P("Kelurahan",n.desa_kel_pemohon_text)})]}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Nomor HP",n.no_telp_pemohon)}),a.jsx(t,{md:"6",children:P("Email",n.email_pemohon)})]}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("RT",n.rt)}),a.jsx(t,{md:"6",children:P("RW",n.rw)})]}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Kode Pos",n.kode_pos)}),a.jsx(t,{md:"6",children:P("Alamat Rumah",n.alamat_pemohon)})]}),a.jsx(ta,{}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Status Perkawinan",n.status_kawin)}),a.jsx(t,{md:"6",children:P("Tanggal Pernikahan",Q(n.tgl_kawin))})]}),a.jsxs(b,{children:[a.jsx(t,{md:"6",children:P("Nomor Buku Nikah",n.no_buku_nikah)}),a.jsx(t,{md:"6",children:P("Nomor SKIM",n.no_skim)})]}),a.jsxs(b,{children:[a.jsx(t,{md:"6"}),a.jsx(t,{md:"6",children:P("Alamat Tinggal",n.alamat_pemohon)})]})]})]})},$e=({formik:e})=>(console.log("PRATINJAU",e.values),a.jsxs("div",{className:"mt-3",children:[a.jsx(Oe,{formik:e}),a.jsx(We,{formik:e})]}));function nn({label:e="Formulir Permohonan"}){const n=ga(),{activeStep:o,setActiveStep:u,stepErrors:i,completedSteps:h,isSubmitting:g,formik:d,isStepSkipped:r,handleNext:s,handleBack:c,handleDraft:l,handleSubmit:x,loadingGet:j,postLoading:m,patchLoading:F}=ze(e,n),_=Xa(),{values:f,setFieldValue:S}=d,k=[{id:"1",label:"Boarding",component:a.jsx(Se,{formik:d,setActiveStep:u,label:e})},{id:"2",label:"Identitas Pemohon",stepNumber:"Langkah 1",component:a.jsx(Ne,{formik:d})},{id:"3",label:"Identitas Suami/Istri",stepNumber:"Langkah 2",component:a.jsx(Ce,{formik:d})},{id:"4",label:"Surat Permohonan",stepNumber:"Langkah 3",component:a.jsx(Ae,{formik:d})},{id:"5",label:"Unggah Dokumen",stepNumber:"Langkah 4",component:a.jsx(Ke,{formik:d})},{id:"6",label:"Pratinjau Formulir",stepNumber:"Langkah 5",component:a.jsx($e,{formik:d})}],v=n?k.filter(U=>U.id!=="1"):k,G={"Formulir Permohonan":n?["2","3","4","5","6"]:["1","2","3","4","5","6"]}[e]||[],R=he(v,G),O=R.filter(U=>U.stepNumber),B=n?o-1:o,q=R[B<0?0:B]||n&&R[0],Y=ge(O,R[B<0?0:B]),X=U=>{const z=n?U+1:U;return!i[z]&&h.has(z)},$=U=>{const z=n?U+1:U;return i[z]&&Object.keys(i[z]).length>0};return p.useEffect(()=>{_(Za()),_(Qa()),_(ae()),_(ee()),_(ne())},[_]),p.useEffect(()=>{f.id_provinsi_pemohon&&_(se(f.id_provinsi_pemohon))},[f.id_provinsi_pemohon,_]),p.useEffect(()=>{f.id_provinsi_lahir_pasangan&&_(te(f.id_provinsi_lahir_pasangan))},[f.id_provinsi_lahir_pasangan]),p.useEffect(()=>{f.id_kab_kota_pemohon&&_(ie(f.id_kab_kota_pemohon))},[f.id_kab_kota_pemohon,f.id_kab_kota_lahir_pasangan,_]),p.useEffect(()=>{f.id_kec_pemohon&&_(re(f.id_kec_pemohon))},[f.id_kec_pemohon,_,S]),a.jsxs(K,{className:"bg-white page-content mb-4",sx:{width:"100%"},children:[O.length>0&&Y>=0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"mb-4",style:{fontWeight:500,fontSize:24,color:"#262626"},children:"Formulir Pendaftaran"}),a.jsx(ye,{steps:O,activeStep:Y,isStepSkipped:r,isStepValid:X,isStepHasError:$})]}),j?a.jsx(He,{}):a.jsxs(K,{children:[(q==null?void 0:q.component)||a.jsx(K,{sx:{p:2,textAlign:"center"},children:a.jsx("p",{children:"Step tidak ditemukan"})}),o>=1&&a.jsx(_e,{handleSubmit:x,handleNext:s,handleBack:c,handleDraft:l,activeStep:o,stepsResult:q,isSubmitting:g,postLoading:m,patchLoading:F})]})]})}export{nn as default};
