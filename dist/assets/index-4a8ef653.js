import{j as a,bK as P,bz as h,aG as g,bL as E,bM as F,r as s,bN as j,bO as b,bP as y,bQ as S,bR as D,bS as A,bT as _}from"./index-1205c25f.js";import{C as N}from"./Table-ed80a108.js";import{a as v}from"./api-560ebb93.js";const z=({vouchers:t})=>{const e=[{id:"no",label:"No"},{id:"voucherCode",label:"Kode Voucher"},{id:"service",label:"Layanan"},{id:"expiryDate",label:"Tanggal Kedaluarsa"},{id:"purchaseAmount",label:"Jumlah Pembelian"},{id:"billAmount",label:"Jumlah Tagihan"},{id:"status",label:"Status",renderCell:(r,n)=>a.jsx(h,{label:r,size:"small",style:{backgroundColor:n.statusColor},sx:{fontWeight:500,fontFamily:"Poppins",fontSize:"12px",color:n.textColor}})}];return a.jsx(P,{data:t,title:"Riwayat Pembelian Voucher",columns:e,enableSearch:!0,searchKeys:["name","applicationNumber"],enablePagination:!0,rowsPerPage:5,emptyMessage:"Tidak ada permohonan yang cocok dengan pencarian Anda."})},B=({steps:t,notifications:e})=>a.jsxs(g,{sx:{display:"flex",flexDirection:"column",gap:2},children:[a.jsx(E,{notifications:e}),a.jsx(F,{logs:t,title:"Log Permohonan 1192",activeStep:2})]}),x={currentPage:1,totalPage:1,totalData:0},w=(t={page:1,limit:10})=>{const[e,r]=s.useState([]),[n,i]=s.useState(!0),[u,c]=s.useState(null),[m,p]=s.useState(x);return s.useEffect(()=>{const d=new AbortController;return(async()=>{i(!0),c(null);try{const o=await v(t,{signal:d.signal});r((o==null?void 0:o.data)||[]),p((o==null?void 0:o.pagination)||x)}catch(o){o.name!=="AbortError"&&(c(o),r([]))}finally{i(!1)}})(),()=>d.abort()},[t.page,t.limit]),{data:e,loading:n,error:u,pagination:m,totalItems:m.totalData}},T=t=>{switch(t){case 0:return{bgColor:"#E6F4EA",textColor:"#2E7D32"};case 1:return{bgColor:"#E3F2FD",textColor:"#1565C0"};case 2:return{bgColor:"#FFF8E1",textColor:"#F9A825"};case 3:return{bgColor:"#FFEBEE",textColor:"#C62828"};case 4:return{bgColor:"#F3E5F5",textColor:"#6A1B9A"};default:return{bgColor:"#041662",textColor:"#fff"}}},I=[{id:"no",label:"No"},{id:"nama_lengkap_pemohon",label:"Nama Lengkap"},{id:"created_at",label:"Tanggal Permohonan"},{id:"status",label:"Status",renderCell:(t,e)=>a.jsx(h,{label:t,size:"small",style:{backgroundColor:e.statusColor},sx:{fontWeight:500,fontFamily:"Poppins",fontSize:"12px",color:e.textColor}})}],K=({applications:t})=>{const[e,r]=s.useState(1),[n,i]=s.useState(10);s.useState("");const{data:u,loading:c,error:m,pagination:p}=w({page:e,limit:n}),d=(u==null?void 0:u.map((l,C)=>{const{bgColor:f,textColor:k}=T(l.status_permohonan);return{no:(e-1)*n+C+1,id_permohonan:l.id_permohonan,nama_lengkap_pemohon:l.nama_lengkap_pemohon,created_at:new Date(l.created_at).toLocaleDateString("id-ID"),status:l.status_permohonan_text,statusColor:f,textColor:k}}))||[],o=l=>{r(l)};return a.jsx(N,{data:d,totalItems:p.totalData,currentPage:e,itemsPerPage:n,title:"Riwayat Permohonan",columns:I,enableSearch:!0,searchKeys:["name","applicationNumber"],enablePagination:!0,url:"/kewarganegaraan/dashboard/detail-permohonan",emptyMessage:"Tidak ada permohonan yang cocok dengan pencarian Anda.",onPageChange:o,loading:c})},V=()=>{const t={name:"Fauzi Iskandar Batubara",email:"fauziiskandar@gmail.com",avatar:"/api/placeholder/50/50"},e=[{no:1,name:"Fauzi Iskandar Batubara",applicationNumber:"1192",date:"24-08-2024",status:"Belum Verifikasi",statusColor:"#FDEED7",textColor:"#E06016"},{no:2,name:"Fauzi Iskandar Batubara",applicationNumber:"1180",date:"12-08-2024",status:"Terverifikasi",statusColor:"#D8F3E0",textColor:"#1F7C4D"},{no:3,name:"Fauzi Iskandar Batubara",applicationNumber:"1129",date:"04-08-2024",status:"Ditolak",statusColor:"#FCE4E4",textColor:"#CF3533"},{no:4,name:"Fauzi Iskandar Batubara",applicationNumber:"1142",date:"04-08-2024",status:"Ditolak",statusColor:"#FCE4E4",textColor:"#CF3533"}],r=[{no:1,voucherCode:"865174857637485",service:"Penanggungjawaban keuangan/mutasi",expiryDate:"24-09-2024",billAmount:"Rp15.000.000",purchaseAmount:1,status:"Belum Bayar",statusColor:"#FCE4E4",textColor:"#CF3533"}],n=[{title:"Permohonan 1192 ditolak",subtitle:"Silahkan klik untuk melihat detail ",icon:a.jsx(A,{color:"error"}),status:"rejected"},{title:"Permohonan 1192 ditolak",subtitle:"Silahkan klik untuk melihat detail ",icon:a.jsx(_,{color:"primary"}),status:"verified"}],i=[{label:"Input Kode Voucher",description:"24 Juli 2025"},{label:"Pendaftaran",description:"24 Juli 2025"},{label:"Verifikasi",description:"24 Juli 2025"},{label:"SK Terbit",description:"24 Juli 2025"}];return a.jsxs(j,{className:"page-content bg-white px-3 px-sm-4 px-md-5 mt-3",children:[a.jsxs(b,{container:!0,spacing:3,children:[a.jsxs(b,{item:!0,xs:12,md:8,lg:8,children:[a.jsxs(g,{sx:{border:"1px solid #E7E7E7",borderRadius:"8px",padding:"20px",mb:2},children:[a.jsx(y,{}),a.jsx(S,{sx:{my:2,color:"#E7E7E7"}}),a.jsx(D,{userProfile:t})]}),a.jsx(g,{className:"my-3",children:a.jsx(K,{applications:e})})]}),a.jsx(b,{item:!0,xs:12,md:4,lg:4,children:a.jsx(B,{steps:i,notifications:n})})]}),a.jsx(z,{vouchers:r})]})};export{V as default};
